{"version":3,"file":"../pages/case/create.js","mappings":"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","sources":["webpack://website/?4dfa","webpack://website/./src/components/case/CreateCaseWizard.tsx","webpack://website/./src/components/symptoms/DiagnosisForm.tsx","webpack://website/./src/components/symptoms/SymptomForm.tsx","webpack://website/./src/pages/case/create.tsx","webpack://website/external commonjs \"jsqr\"","webpack://website/external commonjs \"next/dist/compiled/next-server/pages.runtime.prod.js\"","webpack://website/external commonjs \"next/dist/server/app-render/action-async-storage.external.js\"","webpack://website/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://website/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://website/external commonjs \"react\"","webpack://website/external commonjs \"react-dom\"","webpack://website/external commonjs \"react/jsx-runtime\"","webpack://website/external commonjs2 \"fs\"","webpack://website/external commonjs2 \"path\"","webpack://website/external commonjs2 \"stream\"","webpack://website/external commonjs2 \"zlib\"","webpack://website/external module \"@radix-ui/react-slot\"","webpack://website/external module \"aws-amplify\"","webpack://website/external module \"aws-amplify/auth\"","webpack://website/external module \"class-variance-authority\"","webpack://website/external module \"clsx\"","webpack://website/external module \"react-hook-form\"","webpack://website/external module \"tailwind-merge\"","webpack://website/external module \"zustand\""],"sourcesContent":["import { PagesRouteModule } from \"next/dist/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { hoist } from \"next/dist/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"private-next-pages/_document.tsx\";\nimport * as app from \"private-next-pages/_app.tsx\";\n// Import the userland code.\nimport * as userland from \"private-next-pages/case/create.tsx\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/case/create\",\n        pathname: \"/case/create\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\n\n//# sourceMappingURL=pages.js.map","'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { useForm, UseFormRegister, FieldErrors } from 'react-hook-form';\nimport { useRouter } from 'next/navigation';\nimport { User } from '@/types/user';\nimport { Case } from '@/types/case';\nimport { PersonalBasicInfoForm } from '../user/user-data';\nimport { AddressForm } from '../user/address';\nimport { Demographic } from '../user/demographic';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useNotifications } from '@/contexts/NotificationContext';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { HttpService } from '@/services/httpService';\nimport { useErrorHandler, NotificationCodes } from '@/contexts/ErrorHandlerContext';\nimport { Button } from '../common/Button';\nimport DiagnosisForm from '@/components/symptoms/DiagnosisForm';\nimport { SymptomForm } from '@/components/symptoms/SymptomForm';\nimport Divider from '../common/Divider';\n\n\ninterface PersonalInformationFormData extends User {\n  day: number;\n  month: number;\n  year: number;\n}\n\ninterface CreateCaseWizardProps {\n  user: User;\n}\n\nexport const CreateCaseWizard: React.FC<CreateCaseWizardProps> = ({ user }) => {\n  const router = useRouter();\n  const { t } = useLanguage();\n  const { addNotification } = useNotifications();\n  const { handleCustomError } = useErrorHandler();\n  const { updateUser } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [caseData, setCaseData] = useState<Case | null>(null);\n  const [symptomFormData, setSymptomFormData] = useState<Case | null>(null);\n  const [hasDiagnosis, setHasDiagnosis] = useState<boolean>(false);\n  const [diagnosisAttachments, setDiagnosisAttachments] = useState<{ id: number; originalName?: string; type: { name: string } }[]>([]);\n  const formSubmitRef = React.useRef<(() => void) | null>(null);\n  const formResetRef = React.useRef<(() => void) | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    watch,\n  } = useForm<PersonalInformationFormData>({\n    defaultValues: user ? {\n      ...user,\n      day: user.dateOfBirth ? new Date(user.dateOfBirth).getDate() : undefined,\n      month: user.dateOfBirth ? new Date(user.dateOfBirth).getMonth() + 1 : undefined,\n      year: user.dateOfBirth ? new Date(user.dateOfBirth).getFullYear() : undefined,\n    } : {\n      id: '',\n      firstName: '',\n      lastName: '',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      address: undefined,\n      day: undefined,\n      month: undefined,\n      year: undefined,\n    },\n    mode: 'onChange',\n  });\n\n  // Reset form with user data when user prop changes\n  React.useEffect(() => {\n    if (user) {\n      reset({\n        ...user,\n        day: user.dateOfBirth ? new Date(user.dateOfBirth).getDate() : undefined,\n        month: user.dateOfBirth ? new Date(user.dateOfBirth).getMonth() + 1 : undefined,\n        year: user.dateOfBirth ? new Date(user.dateOfBirth).getFullYear() : undefined,\n      });\n    }\n  }, [user, reset]);\n\n  const handleCaseDataSubmit = useCallback(async (payload: { has_diagnosis: boolean; symptoms: Array<{ description: string; duration: string; severity: string; }>; formData: Case }) => {\n    setCaseData(payload.formData);\n    setSymptomFormData(payload.formData);\n    setHasDiagnosis(payload.has_diagnosis);\n    setCurrentStep(2); // Move to user data step\n  }, []);\n\n  const handleUserDataSubmit = async (data: PersonalInformationFormData) => {\n    setIsSubmitting(true);\n    \n    try {\n      // Process the form data before saving\n      const processedData: User = { ...data };\n      \n      // Convert date of birth from day, month, year to Date object\n      if (data.day && data.month && data.year) {\n        // Use UTC to avoid timezone issues when the date gets serialized\n        processedData.dateOfBirth = new Date(Date.UTC(data.year, data.month - 1, data.day));\n      }\n      \n      // Normalize optional numeric fields: empty string/undefined -> null, strings -> numbers\n      const toNullableNumber = (value: unknown): number | null => {\n        if (value === '' || value === undefined || value === null) return null;\n        if (typeof value === 'number') return Number.isFinite(value) ? value : null;\n        if (typeof value === 'string') {\n          const trimmed = value.trim();\n          if (trimmed === '') return null;\n          const num = Number(trimmed);\n          return Number.isFinite(num) ? num : null;\n        }\n        return null;\n      };\n\n      processedData.height = toNullableNumber(data.height as unknown);\n      processedData.weight = toNullableNumber(data.weight as unknown);\n      \n      // Remove the day, month, year fields as they're not part of the User type\n      delete (processedData as unknown as Record<string, unknown>).day;\n      delete (processedData as unknown as Record<string, unknown>).month;\n      delete (processedData as unknown as Record<string, unknown>).year;\n      \n      // Handle address data: only include if all required fields are provided\n      if (data.address) {\n        const { county, city, postalCode, street, houseNumber } = data.address;\n        \n        // Check if all required address fields are provided\n        if (county && city && postalCode && street && houseNumber) {\n          // Keep the address object as is - backend will handle creation/update\n          processedData.address = {\n            ...data.address,\n            // Convert empty strings to null for optional fields (backend expectation)\n            country: (data.address.country && data.address.country.trim() !== '') ? data.address.country : 'România',\n            block: data.address.block || null,\n            entranceNumber: data.address.entranceNumber || null,\n            floor: data.address.floor || null,\n            apartmentNumber: data.address.apartmentNumber || null,\n          };\n        } else {\n          // If required fields are missing, don't send address\n          delete processedData.address;\n        }\n      }\n      \n      // Update user data first\n      await updateUser(processedData);\n      \n      addNotification('success', t('profile.userDataSaved') || 'User data updated successfully', 3000);\n      \n      // Now create the case\n      const httpService = HttpService.getInstance();\n\n      // Defensive check for non-diagnosis path\n      if (!hasDiagnosis && (!caseData || !caseData.description || !caseData.duration || !caseData.severity)) {\n        handleCustomError(\n          NotificationCodes.VALIDATION_ERROR,\n          t('symptoms.required') || 'Please fill in all required fields'\n        );\n        setIsSubmitting(false);\n        return;\n      }\n\n      // Create the case data in the format expected by the API\n      const caseToCreate: {\n        has_diagnosis: boolean;\n        symptoms: Array<{ description: string; duration: string; severity: string; custom_notes?: string | null }>;\n        custom_notes: string | null;\n        attachments?: Array<{ id: number; originalName?: string | null; type: { name: string }; is_diagnosis: boolean }>;\n      } = hasDiagnosis ? {\n        has_diagnosis: true,\n        symptoms: [],\n        custom_notes: null,\n        attachments: diagnosisAttachments.map(a => ({ id: a.id, originalName: a.originalName || null, type: { name: a.type.name }, is_diagnosis: true })),\n      } : {\n        has_diagnosis: false,\n        symptoms: [{\n          description: caseData!.description!,\n          duration: caseData!.duration!,\n          severity: caseData!.severity!,\n        }],\n        custom_notes: null,\n      };\n\n      await httpService.createCase(caseToCreate);\n\n      addNotification('success', t('symptoms.submitted'), 5000);\n\n      // Redirect to the created case or show success message\n      router.push('/user/profile'); // or wherever you want to redirect\n      \n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleBack = () => {\n    setCurrentStep(currentStep - 1);\n  };\n\n\n  // Check if step 2 is valid (personal info and address)\n  const isStep2Valid = () => {\n    const watchedValues = watch();\n    return !!(\n      watchedValues.firstName &&\n      watchedValues.lastName &&\n      watchedValues.address?.county &&\n      watchedValues.address?.city &&\n      watchedValues.address?.postalCode &&\n      watchedValues.address?.street &&\n      watchedValues.address?.houseNumber\n    );\n  };\n\n  // Check if step 3 is valid (demographic info)\n  const isStep3Valid = () => {\n    const watched = watch() as unknown as { gender?: string; day?: number | string; month?: number | string; year?: number | string };\n    const hasGender = !!watched.gender;\n    const hasDay = !!watched.day;\n    const hasMonth = !!watched.month;\n    const hasYear = !!watched.year;\n    const hasFieldErrors = Boolean((errors as unknown as Record<string, unknown>).gender || errors.day || errors.month || errors.year);\n    return hasGender && hasDay && hasMonth && hasYear && !hasFieldErrors;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background-secondary py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"card-elevated\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-heading mb-2\">\n              {t('wizard.createCase')}\n            </h1>\n            <p className=\"text-body\">\n              {t('wizard.createCaseDescription')}\n            </p>\n          </div>\n\n          {/* Progress Steps */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center justify-center\">\n              <div className={`flex items-center ${currentStep >= 1 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 1 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  1\n                </div>\n                <span className=\"ml-2 font-medium\">{t('symptoms.title') || 'Symptoms'}</span>\n              </div>\n              <div className={`w-16 h-0.5 mx-4 ${currentStep >= 2 ? 'bg-primary-600' : 'bg-gray-300'}`}></div>\n              <div className={`flex items-center ${currentStep >= 2 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 2 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  2\n                </div>\n                <span className=\"ml-2 font-medium\">{t('wizard.personalInfo')}</span>\n              </div>\n              <div className={`w-16 h-0.5 mx-4 ${currentStep >= 3 ? 'bg-primary-600' : 'bg-gray-300'}`}></div>\n              <div className={`flex items-center ${currentStep >= 3 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 3 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  3\n                </div>\n                <span className=\"ml-2 font-medium\">{t('wizard.demographic')}</span>\n              </div>\n            </div>\n          </div>\n\n          <Divider marginClass=\"my-1\" />\n\n          {/* Step 1: Symptoms or Diagnosis Upload */}\n          {currentStep === 1 && (\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {hasDiagnosis ? (t('case.details.documents') || 'Documents') : t('symptoms.title')}\n              </h3>\n              {/* Has Diagnosis Toggle */}\n              <div className=\"flex items-center p-3 bg-neutral-50 rounded-md border border-border-primary\">\n                <label htmlFor=\"hasDiagnosis\" className=\"flex items-center gap-3 cursor-pointer\">\n                  <input\n                    id=\"hasDiagnosis\"\n                    type=\"checkbox\"\n                    className=\"sr-only\"\n                    checked={hasDiagnosis}\n                    onChange={(e) => setHasDiagnosis(e.target.checked)}\n                  />\n                  <div className={`relative inline-flex h-6 w-11 rounded-full transition-colors ${hasDiagnosis ? 'bg-primary-600' : 'bg-neutral-300'}`}>\n                    <span className={`absolute top-0.5 left-0.5 inline-block h-5 w-5 rounded-full bg-white shadow transform transition-transform ${hasDiagnosis ? 'translate-x-5' : 'translate-x-0'}`}></span>\n                  </div>\n                  <span className=\"text-sm text-foreground-primary\">{t('case.create.hasDiagnosis') || 'I already have a diagnosis'}</span>\n                </label>\n              </div>\n              {hasDiagnosis ? (\n                <DiagnosisForm\n                  attachments={diagnosisAttachments.map(a => ({ id: a.id, originalName: a.originalName, type: { name: a.type.name } }))}\n                  onAddDetailed={({ id, originalName, typeName }) => {\n                    setDiagnosisAttachments(prev => {\n                      // If we already have an entry for this upload session, keep the originalName if present\n                      const existsIdx = prev.findIndex(x => x.originalName === originalName || x.id === id);\n                      if (existsIdx >= 0) {\n                        const next = [...prev];\n                        next[existsIdx] = { id, originalName: next[existsIdx].originalName || originalName, type: { name: typeName } };\n                        return next;\n                      }\n                      return [...prev, { id, originalName, type: { name: typeName } }];\n                    });\n                  }}\n                  onDelete={(id) => setDiagnosisAttachments(prev => prev.filter(x => x.id !== id))}\n                />\n              ) : (\n                <SymptomForm\n                  onCaseDataSubmit={handleCaseDataSubmit}\n                  savedFormData={symptomFormData}\n                  registerExternal={({ submit, reset }) => {\n                    // Render buttons below and hook into form handlers\n                    formSubmitRef.current = submit;\n                    formResetRef.current = reset;\n                  }}\n                />\n              )}\n\n              <Divider marginClass=\"my-1\" />\n              \n              <div className=\"flex justify-end gap-4 pt-4\">\n                {!hasDiagnosis && (\n                  <Button\n                    type=\"button\"\n                    variant=\"secondary\"\n                    onClick={() => formResetRef.current?.()}\n                    className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                  >\n                    {t('symptoms.reset')}\n                  </Button>\n                )}\n                \n                <Button\n                  type=\"button\"\n                  variant=\"default\"\n                  onClick={() => {\n                    if (hasDiagnosis) {\n                      if (diagnosisAttachments.length > 0) {\n                        setCurrentStep(2);\n                      }\n                    } else {\n                      formSubmitRef.current?.();\n                    }\n                  }}\n                  disabled={hasDiagnosis && diagnosisAttachments.length === 0}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {t('common.next')}\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Step 2: Personal Information and Address */}\n          {currentStep === 2 && (\n            <form onSubmit={handleSubmit(handleUserDataSubmit)} className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {t('profile.personalInformation')}\n              </h3>\n              \n              {/* Personal Details */}\n              <div className=\"space-y-4\">\n                <PersonalBasicInfoForm register={register as unknown as UseFormRegister<User>} errors={errors as unknown as FieldErrors<User>} />\n              </div>\n\n              {/* Address */}\n              <div className=\"space-y-4\">\n                <AddressForm register={register as unknown as UseFormRegister<User>} errors={errors as unknown as FieldErrors<User>} />\n              </div>\n\n              {/* Navigation Buttons */}\n              <div className=\"flex justify-between gap-3 pt-6 border-t border-gray-200\">\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  onClick={handleBack}\n                  className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                >\n                  {t('common.back')}\n                </Button>\n                \n                <Button\n                  type=\"button\"\n                  variant=\"default\"\n                  onClick={() => setCurrentStep(3)}\n                  disabled={!isStep2Valid()}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {t('common.next')}\n                </Button>\n              </div>\n            </form>\n          )}\n\n          {/* Step 3: Demographic Information */}\n          {currentStep === 3 && (\n            <form onSubmit={handleSubmit(handleUserDataSubmit)} className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {t('wizard.demographic')}\n              </h3>\n              \n              <Demographic register={register} errors={errors} />\n\n              {/* Navigation Buttons */}\n              <div className=\"flex justify-between gap-3 pt-6 border-t border-gray-200\">\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  onClick={handleBack}\n                  className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                >\n                  {t('common.back')}\n                </Button>\n                \n                <Button\n                  type=\"submit\"\n                  variant=\"default\"\n                  disabled={isSubmitting || !isStep3Valid()}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {isSubmitting ? t('common.loading') : t('wizard.saveAndSubmit')}\n                </Button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport UploadAttachmentWizard from '@/components/case/UploadAttachmentWizard';\nimport { Button } from '@/components/common/Button';\nimport AttachmentList from '@/components/attachment/AttachmentList';\nimport { HttpService } from '@/services/httpService';\nimport { Attachment } from '@/types/attachment';\n\ninterface DiagnosisFormProps {\n  attachments: Pick<Attachment, 'id' | 'originalName' | 'type'>[];\n  onAddDetailed: (payload: { id: number; originalName?: string; typeName: string }) => void;\n  onDelete?: (id: number) => void;\n  onValidityChange?: (isValid: boolean) => void;\n}\n\nexport const DiagnosisForm: React.FC<DiagnosisFormProps> = ({ attachments, onAddDetailed, onDelete, onValidityChange }) => {\n  const { t } = useLanguage();\n  const [open, setOpen] = useState(false);\n  const http = HttpService.getInstance();\n\n  React.useEffect(() => {\n    onValidityChange?.((attachments || []).length > 0);\n  }, [attachments, onValidityChange]);\n\n  return (\n    <div className=\"space-y-4\">\n      <p className=\"text-body\">{t('case.create.diagnosisUploadInfo') || 'Upload your diagnosis files now. They will be linked to your case after creation.'}</p>\n      <UploadAttachmentWizard\n        isOpen={open}\n        onClose={() => setOpen(false)}\n        isDiagnosis={true}\n        onUploaded={(id, displayName, typeName) => {\n          if (typeof id === 'number') {\n            onAddDetailed({ id, originalName: displayName || undefined, typeName: typeName || 'File' });\n          }\n        }}\n      />\n      <AttachmentList\n        items={(attachments || []).map((a, idx) => ({\n          id: a.id || idx,\n          label: a.originalName || `Document ${idx + 1}`,\n          typeName: a.type?.name,\n          metaLeft: undefined,\n          metaRight: undefined,\n          showDelete: true,\n        }))}\n        showOpen={false}\n        openText={t('case.details.open') || 'Open'}\n        deleteText={t('case.details.delete') || 'Delete'}\n        onOpen={async (id) => {\n          const item = (attachments || []).find(a => String(a.id) === String(id));\n          if (!item) return;\n          // Pre-case attachments still can be opened if backed by S3 URL via getAttachmentUrl, but they have no caseId → cannot fetch URL\n          // So for now, skip opening when no caseId\n        }}\n        onDelete={async (id) => {\n          try {\n            // Delete pre-case attachment (no caseId)\n            await http.deleteAttachment({ attachmentId: String(id), caseId: null });\n          } catch {\n            // ignore; backend handles validation\n          }\n          onDelete?.(Number(id));\n        }}\n      />\n      {!open && (\n        <div className=\"flex justify-end\">\n          <Button type=\"button\" variant=\"default\" className=\"bg-primary-600 hover:bg-primary-700 text-white\" onClick={() => setOpen(true)}>\n            {t('case.details.upload') || 'Upload'}\n          </Button>\n        </div>\n      )}\n      {/* Navigation buttons rendered by wizard */}\n    </div>\n  );\n};\n\nexport default DiagnosisForm;\n\n\n","'use client';\n\nimport React, { useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { Case } from '@/types/case';\n// Buttons will be rendered by the wizard; this component exposes submit/reset APIs\n\ninterface SymptomFormProps {\n  onCaseDataSubmit: (caseData: { has_diagnosis: boolean; symptoms: Array<{ description: string; duration: string; severity: string; }>; formData: Case }) => void;\n  savedFormData?: Case | null;\n  registerExternal?: (api: { submit: () => void; reset: () => void }) => void;\n}\n\nexport const SymptomForm: React.FC<SymptomFormProps> = ({ onCaseDataSubmit, savedFormData, registerExternal }) => {\n  const { t } = useLanguage();\n\n  const { register, handleSubmit, formState: { errors }, watch, reset, setValue } = useForm<Case>({\n    defaultValues: savedFormData || {\n      description: '',\n      duration: '',\n      severity: '',\n    }\n  });\n\n  React.useEffect(() => {\n    if (savedFormData) {\n      setValue('description', savedFormData.description || '');\n      setValue('duration', savedFormData.duration || '');\n      setValue('severity', savedFormData.severity || '');\n    }\n  }, [savedFormData, setValue]);\n\n  const onSubmit = useCallback(async (data: Case) => {\n    onCaseDataSubmit({\n      has_diagnosis: false,\n      symptoms: [{\n        description: data.description!,\n        duration: data.duration!,\n        severity: data.severity!,\n      }],\n      formData: data\n    });\n  }, [onCaseDataSubmit]);\n\n  React.useEffect(() => {\n    if (registerExternal) {\n      registerExternal({\n        submit: () => handleSubmit(onSubmit)(),\n        reset: () => reset(),\n      });\n    }\n  }, [registerExternal, handleSubmit, onSubmit, reset]);\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n      {/* Symptoms Description */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.description')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <textarea\n          {...register('description', {\n            required: (t('symptoms.required') as unknown as string),\n            maxLength: {\n              value: 2000,\n              message: t('symptoms.maxLengthExceeded')\n            }\n          })}\n          rows={4}\n          maxLength={2000}\n          className=\"input-field resize-none\"\n          placeholder={t('symptoms.placeholder')}\n        />\n        <div className=\"flex justify-between items-center mt-1\">\n          {errors.description && (\n            <p className=\"text-sm text-error-600\">{errors.description.message}</p>\n          )}\n          <span className=\"text-sm text-body-secondary ml-auto\">\n            {watch('description')?.length || 0}/2000\n          </span>\n        </div>\n      </div>\n\n      {/* Duration */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.duration')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <select\n          {...register('duration', {\n            required: (t('symptoms.durationRequired') as unknown as string)\n          })}\n          className=\"input-field\"\n        >\n          <option value=\"\">{t('symptoms.selectDuration')}</option>\n          <option value=\"less_than_24h\">{t('symptoms.lessThan24h')}</option>\n          <option value=\"1_to_3_days\">{t('symptoms.1to3Days')}</option>\n          <option value=\"3_to_7_days\">{t('symptoms.3to7Days')}</option>\n          <option value=\"1_to_2_weeks\">{t('symptoms.1to2Weeks')}</option>\n          <option value=\"more_than_2_weeks\">{t('symptoms.moreThan2Weeks')}</option>\n        </select>\n        {errors.duration && (\n          <p className=\"mt-2 text-sm text-error-600\">{errors.duration.message}</p>\n        )}\n      </div>\n\n      {/* Severity */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.severity')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <select\n          {...register('severity', {\n            required: (t('symptoms.severityRequired') as unknown as string)\n          })}\n          className=\"input-field\"\n        >\n          <option value=\"\">{t('symptoms.selectSeverity')}</option>\n          <option value=\"mild\">{t('symptoms.mild')}</option>\n          <option value=\"moderate\">{t('symptoms.moderate')}</option>\n          <option value=\"severe\">{t('symptoms.severe')}</option>\n        </select>\n        {errors.severity && (\n          <p className=\"mt-2 text-sm text-error-600\">{errors.severity.message}</p>\n        )}\n      </div>\n\n      {/* Navigation buttons are handled by the wizard */}\n    </form>\n  );\n};","'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { CreateCaseWizard } from '@/components/case/CreateCaseWizard';\n\nexport default function CreateCasePage() {\n  const router = useRouter();\n  const { isAuthenticated, loading, user, userLoading, userGroups } = useAuth();\n  const { t } = useLanguage();\n  const isPatient = userGroups.includes('patient');\n\n  // Redirect non-patient users directly to profile\n  React.useEffect(() => {\n    if (isAuthenticated && !loading && !userLoading && user && !isPatient) {\n      router.replace('/user/profile');\n    }\n  }, [isAuthenticated, loading, userLoading, user, isPatient, router]);\n\n  // If not authenticated, redirect to login\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background-secondary\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-heading mb-4\">\n            {t('auth.loginRequired') || 'Login Required'}\n          </h1>\n          <p className=\"text-body mb-6\">\n            {t('auth.loginToCreateCase') || 'Please log in to create a medical case.'}\n          </p>\n          <button\n            onClick={() => router.push('/auth/login')}\n            className=\"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors\"\n          >\n            {t('auth.login') || 'Login'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return;\n  }\n\n  // Show the CreateCaseWizard\n  return <CreateCaseWizard user={user} />;\n}","module.exports = require(\"jsqr\");","module.exports = require(\"next/dist/compiled/next-server/pages.runtime.prod.js\");","module.exports = require(\"next/dist/server/app-render/action-async-storage.external.js\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"zlib\");","module.exports = import(\"@radix-ui/react-slot\");;","module.exports = import(\"aws-amplify\");;","module.exports = import(\"aws-amplify/auth\");;","module.exports = import(\"class-variance-authority\");;","module.exports = import(\"clsx\");;","module.exports = import(\"react-hook-form\");;","module.exports = import(\"tailwind-merge\");;","module.exports = import(\"zustand\");;"],"names":["CreateCaseWizard","user","router","useRouter","t","useLanguage","addNotification","useNotifications","handleCustomError","useErrorHandler","updateUser","useAuth","isSubmitting","setIsSubmitting","useState","currentStep","setCurrentStep","caseData","setCaseData","symptomFormData","setSymptomFormData","hasDiagnosis","setHasDiagnosis","diagnosisAttachments","setDiagnosisAttachments","formSubmitRef","React","formResetRef","register","handleSubmit","formState","errors","reset","watch","useForm","defaultValues","day","dateOfBirth","Date","getDate","undefined","month","getMonth","year","getFullYear","id","firstName","lastName","createdAt","updatedAt","address","mode","handleCaseDataSubmit","useCallback","payload","formData","has_diagnosis","handleUserDataSubmit","data","processedData","UTC","toNullableNumber","value","Number","isFinite","trimmed","trim","num","height","weight","county","city","postalCode","street","houseNumber","country","block","entranceNumber","floor","apartmentNumber","httpService","HttpService","getInstance","description","duration","severity","NotificationCodes","VALIDATION_ERROR","caseToCreate","symptoms","custom_notes","attachments","map","a","originalName","type","name","is_diagnosis","createCase","push","handleBack","div","className","h1","p","span","Divider","marginClass","h3","label","htmlFor","input","checked","onChange","e","target","DiagnosisForm","onAddDetailed","typeName","prev","existsIdx","findIndex","x","next","onDelete","filter","SymptomForm","onCaseDataSubmit","savedFormData","registerExternal","submit","current","Button","variant","onClick","length","disabled","form","onSubmit","PersonalBasicInfoForm","AddressForm","watchedValues","Demographic","isStep3Valid","watched","hasGender","gender","hasDay","hasMonth","hasYear","hasFieldErrors","Boolean","onValidityChange","open","setOpen","http","UploadAttachmentWizard","isOpen","onClose","isDiagnosis","onUploaded","displayName","AttachmentList","items","idx","metaLeft","metaRight","showDelete","showOpen","openText","deleteText","onOpen","item","find","String","deleteAttachment","attachmentId","caseId","setValue","textarea","required","maxLength","message","rows","placeholder","select","option","CreateCasePage","isAuthenticated","loading","userLoading","userGroups","includes","button"],"sourceRoot":""}