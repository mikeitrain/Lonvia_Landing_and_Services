{"version":3,"file":"249.js","mappings":"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","sources":["webpack://website/./src/components/case/case-details-admin.tsx","webpack://website/./src/components/case/case-details.tsx","webpack://website/./src/components/case/case-list.tsx","webpack://website/./src/components/case/case-workflow-info.tsx","webpack://website/./src/components/common/ConfirmationModal.tsx","webpack://website/./src/components/common/CurrencyInputField.tsx","webpack://website/./src/components/common/ProtectedRoute.tsx","webpack://website/./src/components/status/status-flow-modal.tsx","webpack://website/./src/lib/documentUtils.ts","webpack://website/./node_modules/@heroicons/react/24/outline/esm/ArrowDownTrayIcon.js","webpack://website/./node_modules/@heroicons/react/24/outline/esm/BoltIcon.js","webpack://website/./node_modules/@heroicons/react/24/outline/esm/CalendarDaysIcon.js","webpack://website/./node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","webpack://website/./node_modules/@heroicons/react/24/outline/esm/DocumentTextIcon.js","webpack://website/./node_modules/@heroicons/react/24/outline/esm/LinkIcon.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Divider from '@/components/common/Divider';\nimport { CurrencyInputFieldControlled } from '@/components/common/CurrencyInputField';\nimport { ExclamationTriangleIcon } from '@heroicons/react/24/outline';\nimport { Case } from '@/types/case';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { CaseStatus, CASE_STATUS } from '@/types/status';\nimport { HttpService } from '@/services/httpService';\nimport { fetchAuthSession } from 'aws-amplify/auth';\nimport { DoctorProfile } from '@/types/doctor';\nimport { formatDate, formatTime } from '@/lib/utils';\n\ninterface CaseDetailsAdminProps {\n    caseData: Case;\n    onCaseUpdated?: (updated: Case) => void;\n    doctors?: DoctorProfile[];\n}\n\nconst CaseDetailsAdmin: React.FC<CaseDetailsAdminProps> = ({ caseData, onCaseUpdated, doctors = [] }) => {\n    const { t, translateStatus, language } = useLanguage();\n    const [adminNotes, setAdminNotes] = useState<string>(caseData.admin_notes || '');\n    const [nextStatus, setNextStatus] = useState<string>('');\n    const [appointmentDate1, setAppointmentDate1] = useState<string>('');\n    const [appointmentDate2, setAppointmentDate2] = useState<string>('');\n    const [appointmentDuration, setAppointmentDuration] = useState<number>(30);\n    const [appointmentError, setAppointmentError] = useState<string>('');\n    const [selectedDoctorId, setSelectedDoctorId] = useState<number | ''>('');\n\n    // Calculate minimum date (2 days from now) for appointment selection\n    const getMinAppointmentDate = () => {\n        const now = new Date();\n        const twoDaysFromNow = new Date(now.getTime() + (2 * 24 * 60 * 60 * 1000));\n        return twoDaysFromNow.toISOString().slice(0, 16); // Format for datetime-local input\n    };\n    const [isAdmin, setIsAdmin] = useState<boolean>(false);\n    const [offerAmount, setOfferAmount] = useState<string>('');\n    const [offerText, setOfferText] = useState<string>('');\n\n    useEffect(() => {\n        let mounted = true;\n        (async () => {\n            try {\n                const session = await fetchAuthSession();\n                const idPayload = session.tokens?.idToken?.payload as Record<string, unknown> | undefined;\n                const groups = (idPayload?.['cognito:groups'] as string[] | undefined) || [];\n                if (mounted) setIsAdmin(groups.includes('admin'));\n            } catch {\n                if (mounted) setIsAdmin(false);\n            }\n        })();\n        return () => { mounted = false; };\n    }, []);\n\n    const currentStatus = StatusUtils.toCaseStatus(caseData.status?.name || '');\n    const validNextStatuses: CaseStatus[] = currentStatus ? StatusUtils.getValidTransitions(currentStatus as CaseStatus) : [];\n\n    // Row enablement based on status\n    const canEditNotes = currentStatus ? StatusUtils.isActiveStatus(currentStatus as CaseStatus) : false;\n    const canSendOffer = currentStatus === CASE_STATUS.NEW;\n    const canMarkPaid = currentStatus === CASE_STATUS.WAITING_FOR_PAYMENT;\n    const canSetAppointment = currentStatus === CASE_STATUS.PAID;\n\n    useEffect(() => {\n        setAdminNotes(caseData.admin_notes || '');\n    }, [caseData.id, caseData.admin_notes]);\n\n    const handleSaveNotes = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const payload: Partial<Case> = {};\n        payload.admin_notes = adminNotes;\n        const updated = await http.updateCase(String(caseData.id), payload as Case);\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleSetStatus = async () => {\n        if (!caseData.id || !nextStatus) return;\n        const http = HttpService.getInstance();\n        const payload: Partial<Case> = {};\n        const statusPayload = { id: 0 as number, name: nextStatus as CaseStatus } as unknown as NonNullable<Case['status']>;\n        payload.status = statusPayload;\n        const updated = await http.updateCase(String(caseData.id), payload as Case);\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n\n    const handleSendOffer = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const amount = Number(offerAmount);\n        if (!offerText || !amount || amount <= 0) return;\n        const updated = await http.sendOffer({ caseId: String(caseData.id) }, { text: offerText, amount_gross: amount });\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleMarkInvoicePaid = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const updated = await http.markInvoicePaid({ caseId: String(caseData.id) });\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleSetAppointment = async () => {\n        if (!caseData.id) return;\n        \n        // Clear any previous errors\n        setAppointmentError('');\n        \n        // Validate that at least one appointment date is filled\n        if (!appointmentDate1 && !appointmentDate2) {\n            setAppointmentError(t('case.details.appointmentError'));\n            return;\n        }\n        \n        // Validate that a doctor is selected\n        if (!selectedDoctorId) {\n            setAppointmentError(t('case.details.doctorError'));\n            return;\n        }\n        \n        const http = HttpService.getInstance();\n        const suggestedAppointments = [];\n        \n        if (appointmentDate1) {\n            suggestedAppointments.push({\n                scheduledStart: appointmentDate1,\n                meetingStatus: 'suggested',\n                durationMinutes: appointmentDuration\n            });\n        }\n        \n        if (appointmentDate2) {\n            suggestedAppointments.push({\n                scheduledStart: appointmentDate2,\n                meetingStatus: 'suggested',\n                durationMinutes: appointmentDuration\n            });\n        }\n        \n        const payload = {\n            caseId: caseData.id,\n            doctorId: selectedDoctorId,\n            suggestedAppointments: suggestedAppointments\n        };\n        \n        const updated = await http.suggestAppointment(payload);\n        if (onCaseUpdated) onCaseUpdated(updated);\n        \n        // Clear the appointment dates and doctor selection after successful submission\n        setAppointmentDate1('');\n        setAppointmentDate2('');\n        setSelectedDoctorId('');\n    };\n\n    if (!isAdmin) return null;\n\n    const buttonWidthClass = 'w-48';\n\n    return (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-4 space-y-4\">\n            <h2 className=\"text-lg font-semibold text-foreground-primary\">{t('admin.panel.title') || 'Admin Panel'}</h2>\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Row 1: Notes + Save button */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-4\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('case.details.notes') || 'Notes'}</label>\n                    <textarea\n                        className=\"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={adminNotes}\n                        onChange={(e) => setAdminNotes(e.target.value)}\n                        disabled={!canEditNotes}\n                    />\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canEditNotes} onClick={handleSaveNotes} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('common.save') || 'Save'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <Divider marginClass=\"my-3\" />\n\n            {/* Row 2: Offer amount (left) + Send offer (right) */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-3\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('offer.text') || 'Offer text'}</label>\n                    <textarea\n                        className=\"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={offerText}\n                        onChange={(e) => setOfferText(e.target.value)}\n                        disabled={!canSendOffer}\n                    />\n                </div>\n                <div className=\"md:col-span-1 h-full\">\n                    <CurrencyInputFieldControlled\n                        label={t('offer.amount') || 'Amount'}\n                        value={offerAmount}\n                        onChange={(e) => setOfferAmount(e.target.value)}\n                        disabled={!canSendOffer}\n                        placeholder={t('offer.amount') || 'Amount'}\n                    />\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canSendOffer} onClick={handleSendOffer} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('offer.send') || 'Send offer'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <Divider marginClass=\"my-3\" />\n\n            {/* Row 3: Mark invoice as paid (right aligned) */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-4\" />\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canMarkPaid} onClick={handleMarkInvoicePaid} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('invoice.paid') || 'Paid'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <div className=\"my-3 flex justify-center\">\n                <div className=\"h-[1px] w-full\" style={{ backgroundColor: 'var(--border-secondary)' }} />\n            </div>\n\n            {/* Row 4: Existing Appointments */}\n            {caseData.appointments && caseData.appointments.length > 0 && (\n                <div className=\"space-y-4\">\n                    <h3 className=\"text-lg font-semibold text-foreground-primary\">\n                        {t('case.details.existingAppointments') || 'Existing Appointments'}\n                    </h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                        {caseData.appointments.map((appointment) => {\n                            const statusColor = appointment.meetingStatus === 'accepted' ? 'bg-green-100 border-green-300 text-green-800' :\n                                              appointment.meetingStatus === 'suggested' ? 'bg-blue-100 border-blue-300 text-blue-800' :\n                                              appointment.meetingStatus === 'declined' ? 'bg-red-100 border-red-300 text-red-800' :\n                                              appointment.meetingStatus === 'completed' ? 'bg-gray-100 border-gray-300 text-gray-800' :\n                                              appointment.meetingStatus === 'canceled' ? 'bg-orange-100 border-orange-300 text-orange-800' :\n                                              'bg-gray-100 border-gray-300 text-gray-800';\n                            \n                            return (\n                                <div key={appointment.id} className={`border rounded-lg p-4 ${statusColor}`}>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between items-start\">\n                                            <div className=\"text-sm font-medium\">\n                                                {formatDate(appointment.scheduledStart, language)} - {formatTime(appointment.scheduledStart, language)}\n                                            </div>\n                                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusColor}`}>\n                                                {appointment.meetingStatus}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between items-start\">\n                                            {appointment.doctorName && (\n                                                <div className=\"text-sm font-medium\">\n                                                    {appointment.doctorName}\n                                                </div>\n                                            )}\n                                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusColor}`}>\n                                                {appointment.durationMinutes} min\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            )}\n\n            {/* Row 5: Appointment suggestions */}\n            <div className=\"space-y-4\">\n                {canSetAppointment && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n                    <p className=\"text-sm text-blue-800\">\n                        <strong>{t('case.details.timezoneInfo.title') || 'Hinweis:'}</strong> {t('case.details.timezoneInfo.message') || 'Die eingegebene Zeit ist immer in deutscher Zeit (GMT+2).'}\n                    </p>\n                </div>\n                )}\n\n                {/* Appointment Details Row */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.appointmentDate')} 1\n                        </label>\n                        <input\n                            type=\"datetime-local\"\n                            className={`w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ${\n                                appointmentError ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''\n                            }`}\n                            value={appointmentDate1}\n                            min={getMinAppointmentDate()}\n                            onChange={(e) => {\n                                setAppointmentDate1(e.target.value);\n                                // Clear error when user starts typing\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        />\n                        {appointmentError && (\n                            <p className=\"mt-1 text-sm text-red-600\">{appointmentError}</p>\n                        )}\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.appointmentDate')} 2\n                        </label>\n                        <input\n                            type=\"datetime-local\"\n                            className=\"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed\"\n                            value={appointmentDate2}\n                            min={getMinAppointmentDate()}\n                            onChange={(e) => {\n                                setAppointmentDate2(e.target.value);\n                                // Clear error when user starts typing\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        />\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.duration')}\n                        </label>\n                        <select\n                            className=\"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed\"\n                            value={appointmentDuration}\n                            onChange={(e) => setAppointmentDuration(Number(e.target.value))}\n                            disabled={!canSetAppointment}\n                        >\n                            <option value={10}>{t('case.details.durationOptions.10min')}</option>\n                            <option value={15}>{t('case.details.durationOptions.15min')}</option>\n                            <option value={20}>{t('case.details.durationOptions.20min')}</option>\n                            <option value={30}>{t('case.details.durationOptions.30min')}</option>\n                            <option value={45}>{t('case.details.durationOptions.45min')}</option>\n                            <option value={60}>{t('case.details.durationOptions.60min')}</option>\n                            <option value={90}>{t('case.details.durationOptions.90min')}</option>\n                            <option value={120}>{t('case.details.durationOptions.120min')}</option>\n                        </select>\n                    </div>\n                </div>\n                \n                {/* Doctor Selection Row */}\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    <div className=\"md:col-span-4\">\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.doctor')}\n                        </label>\n                        <select\n                            className={`w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ${\n                                appointmentError ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''\n                            }`}\n                            value={selectedDoctorId}\n                            onChange={(e) => {\n                                setSelectedDoctorId(e.target.value ? Number(e.target.value) : '');\n                                // Clear error when user makes a selection\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        >\n                            <option value=\"\">{t('case.details.selectDoctor')}</option>\n                            {doctors.map(doctor => (\n                                <option key={doctor.id} value={doctor.id}>\n                                    {doctor.user?.firstName} {doctor.user?.lastName}\n                                    {doctor.title && ` (${doctor.title})`}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n                </div>\n                \n                <div className=\"flex justify-end\">\n                    <button \n                        disabled={!canSetAppointment || (!appointmentDate1 && !appointmentDate2) || !selectedDoctorId} \n                        onClick={handleSetAppointment} \n                        className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}\n                    >\n                        {t('case.details.suggestAppointments') || 'Suggest appointments'}\n                    </button>\n                </div>\n            </div>\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Row 5: Status + Set status button */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-1\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('status.next') || 'Next status'}</label>\n                    <select\n                        className=\"input-field w-full disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={nextStatus}\n                        onChange={(e) => setNextStatus(e.target.value)}\n                    >\n                        <option value=\"\">{t('common.select') || 'Select'}</option>\n                        {validNextStatuses.map(s => (\n                            <option key={s} value={s}>{translateStatus(s)}</option>\n                        ))}\n                    </select>\n                </div>\n                <div className=\"md:col-span-3\">\n                    <div className=\"flex items-start gap-2 bg-warning-50 text-warning-800 border border-warning-300 rounded-md p-3\">\n                        <ExclamationTriangleIcon className=\"h-5 w-5 text-warning-600 mt-0.5\" />\n                        <p className=\"text-sm\">\n                            {t('admin.status.manualChangeWarning') || 'This action should only be used in special cases. Normally, the status changes automatically.'}\n                        </p>\n                    </div>\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button onClick={handleSetStatus} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('status.set') || 'Set status'}</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CaseDetailsAdmin;\n\n\n","import React, { useEffect, useState } from 'react';\nimport { Case } from '@/types/case';\nimport { Attachment } from '@/types/attachment';\nimport { DoctorProfile } from '@/types/doctor';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { formatDate } from '@/lib/utils';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { Gender } from '@/lib/genderUtils';\nimport { translateDocumentType } from '@/lib/documentUtils';\nimport { ConfirmationModal } from '@/components/common/ConfirmationModal';\nimport UploadAttachmentWizard from '@/components/case/UploadAttachmentWizard';\nimport { HttpService } from '@/services/httpService';\nimport StatusFlowModal from '@/components/status/status-flow-modal';\nimport CaseDetailsAdmin from '@/components/case/case-details-admin';\nimport { CaseWorkflowInfo } from '@/components/case/case-workflow-info';\nimport { DocumentTextIcon, ArrowDownTrayIcon, CalendarDaysIcon, LinkIcon } from '@heroicons/react/24/outline';\nimport AttachmentList from '@/components/attachment/AttachmentList';\nimport { CASE_STATUS, CaseStatusObject } from '@/types/status';\n\ninterface CaseDetailsProps {\n  caseData: Case;\n  onUpdated?: (updated: Case) => void;\n  doctors?: DoctorProfile[];\n}\n\nexport const CaseDetails: React.FC<CaseDetailsProps> = ({ caseData, onUpdated, doctors = [] }) => {\n  const { userGroups } = useAuth();\n  const { language, t, translateSymptomSeverity, translateSymptomDuration, translateStatus, translateGender } = useLanguage();\n  const [deleteModal, setDeleteModal] = useState<{\n    isOpen: boolean;\n    attachment: Attachment | null;\n  }>({\n    isOpen: false,\n    attachment: null,\n  });\n  // Removed per refactor; AttachmentList handles actions without per-item downloading state\n  const [attachments, setAttachments] = useState<Attachment[]>(caseData.attachments || []);\n  const [currentCase, setCurrentCase] = useState<Case>(caseData);\n  const [canSeeDocuments, setCanSeeDocuments] = useState<boolean>(false);\n  const [downloadingDocType, setDownloadingDocType] = useState<string | null>(null);\n  const [isAcceptModalOpen, setIsAcceptModalOpen] = useState<boolean>(false);\n  const [isAccepting, setIsAccepting] = useState<boolean>(false);\n  const [selectedTimeslotId, setSelectedTimeslotId] = useState<number | null>(null);\n\n  useEffect(() => {\n    setAttachments(caseData.attachments || []);\n  }, [caseData.attachments]);\n\n  useEffect(() => {\n    setCanSeeDocuments(Array.isArray(userGroups) ? (userGroups.includes('admin') || userGroups.includes('patient')) : false);\n  }, [userGroups]);\n\n  const isPatient = Array.isArray(userGroups) ? userGroups.includes('patient') : false;\n  const isOfferSent = StatusUtils.extractStatus(currentCase.status) === CASE_STATUS.OFFER_SENT;\n  const canAcceptOffer = isPatient && isOfferSent;\n\n  const offerDocument = (currentCase.documents || []).find(d => String(d.doc_type || '').toLowerCase() === 'offer');\n\n  const getStatusColor = (status: Case['status'] | string | undefined) => {\n    const extracted = StatusUtils.extractStatus(status);\n    if (extracted) {\n      return StatusUtils.getStatusColorClasses(extracted);\n    }\n    return 'status-neutral';\n  };\n\n  const getStatusLabel = (status: Case['status'] | string | undefined) => {\n    const extracted = StatusUtils.extractStatus(status);\n    if (extracted) {\n      return translateStatus(extracted);\n    }\n    // Fallback: try to humanize string or unknown object\n    let name: string | null = null;\n    if (typeof status === 'string') {\n      name = status;\n    } else if (status && typeof status === 'object' && 'name' in status) {\n      const s = status as Partial<CaseStatusObject>;\n      name = typeof s.name === 'string' ? s.name : null;\n    }\n    return (name ? name.replace(/_/g, ' ') : (t('status.unknown') || 'Unknown')) as string;\n  };\n\n  const handleDeleteAttachment = (attachment: Attachment) => {\n    setDeleteModal({\n      isOpen: true,\n      attachment,\n    });\n  };\n\n  const confirmDelete = async () => {\n    try {\n      if (deleteModal.attachment && deleteModal.attachment.id && currentCase.id) {\n        const http = HttpService.getInstance();\n        await http.deleteAttachment({\n          attachmentId: String(deleteModal.attachment.id),\n          caseId: typeof currentCase.id === 'number' ? currentCase.id : Number(currentCase.id),\n        });\n        // Remove from the list only on successful deletion\n        setAttachments(prev => prev.filter(a => a.id !== deleteModal.attachment!.id));\n      }\n    } finally {\n      setDeleteModal({ isOpen: false, attachment: null });\n    }\n  };\n\n  const getAttachmentButtonText = (typeName: string) => {\n    switch (typeName) {\n      case 'DICOM':\n        return t('case.details.download');\n      case 'Link':\n        return t('case.details.open');\n      default:\n        return t('case.details.view');\n    }\n  };\n\n  const handleOpenAttachment = async (attachment: Attachment) => {\n    if (!attachment.id || !currentCase.id) return;\n    const http = HttpService.getInstance();\n    const { url } = await http.getAttachmentUrl({\n      attachmentId: String(attachment.id),\n      caseId: typeof currentCase.id === 'number' ? currentCase.id : Number(currentCase.id),\n    });\n    // Open in new tab; S3 responses may trigger download via content-disposition\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  const handleDownloadDocument = async (docType: string) => {\n    if (!currentCase.id) return;\n    setDownloadingDocType(docType);\n    try {\n      const http = HttpService.getInstance();\n      const { url } = await http.getDocumentUrl({ caseId: String(currentCase.id), docType });\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = '';\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    } finally {\n      setDownloadingDocType(null);\n    }\n  };\n\n  const confirmAcceptOffer = async () => {\n    if (!currentCase.id) return;\n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updatedCase: Case = await http.acceptOffer(String(currentCase.id));\n      setCurrentCase(updatedCase);\n      setAttachments(updatedCase.attachments || []);\n      if (onUpdated) onUpdated(updatedCase);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const handleAcceptTimeslot = async () => {\n    if (!currentCase.id || !selectedTimeslotId) return;\n    \n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updated = await http.acceptAppointment(String(selectedTimeslotId), String(currentCase.id));\n      setCurrentCase(updated);\n      setAttachments(updated.attachments || []);\n      if (onUpdated) onUpdated(updated);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const handleDeclineTimeslot = async () => {\n    if (!currentCase.id) return;\n    \n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updated = await http.declineAppointment(String(currentCase.id));\n      setCurrentCase(updated);\n      setAttachments(updated.attachments || []);\n      if (onUpdated) onUpdated(updated);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const [isUploadOpen, setIsUploadOpen] = useState(false);\n  const [isStatusInfoOpen, setIsStatusInfoOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n  }, [caseData.id]);\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-foreground-primary\">Case {currentCase.id}</h1>\n        <div className=\"flex items-center gap-4\">\n          <button\n            type=\"button\"\n            onClick={() => setIsStatusInfoOpen(true)}\n            className=\"text-sm text-primary-600 hover:underline\"\n          >\n            {t('status.moreInfo') || 'Click here for more information'}\n          </button>\n          <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ${getStatusColor(currentCase.status)}`}>\n            {getStatusLabel(currentCase.status)}\n          </span>\n        </div>\n      </div>\n\n      {/* Admin controls */}\n      <CaseDetailsAdmin caseData={currentCase} doctors={doctors} onCaseUpdated={(updated) => {\n        setCurrentCase(updated);\n        setAttachments(updated.attachments || []);\n        if (onUpdated) onUpdated(updated);\n      }} />\n\n      <CaseWorkflowInfo caseData={currentCase} />\n    \n      {/* Official Documents section */}\n      {canSeeDocuments && currentCase.documents && currentCase.documents.length > 0 && (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6\">\n          <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.receipts') || 'Documents'}</h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n            {currentCase.documents.map((doc, idx) => (\n              <div key={`${doc.doc_no || idx}`} className=\"flex items-center justify-between bg-neutral-50 rounded-md p-4 border border-border-primary\">\n                <div className=\"flex-1 mr-4\">\n                  <div className=\"text-xs font-bold text-foreground-tertiary mb-1\">{translateDocumentType(doc.doc_type, t)}</div>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"shrink-0 text-primary-600\">\n                      <DocumentTextIcon className=\"w-10 h-10\" />\n                    </div>\n                    <div className=\"text-foreground-secondary text-sm\">\n                      {doc.doc_no}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center\">\n                  <button\n                    onClick={() => handleDownloadDocument(doc.doc_type)}\n                    disabled={downloadingDocType === doc.doc_type}\n                    className=\"bg-primary-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors disabled:opacity-60 inline-flex items-center gap-2\"\n                  >\n                    <ArrowDownTrayIcon className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Accept Offer CTA (shown to patient when status is OFFER_SENT) */}\n      {canAcceptOffer && (\n        <div className=\"m-6 flex justify-center\">\n          <button\n            type=\"button\"\n            onClick={() => setIsAcceptModalOpen(true)}\n            className=\"bg-accent-500 hover:bg-accent-600 text-white px-6 py-2 rounded-md font-medium transition-colors\"\n          >\n            {t('case.details.acceptOffer') || 'Accept offer'}\n          </button>\n        </div>\n      )}\n\n\n      {/* Suggest Appointments CTA (shown to user and admin when status is TIMESLOTS_SENT) */}\n      {currentCase.status?.name === CASE_STATUS.TIMESLOTS_SENT && currentCase.appointments && (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6\">\n          <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">\n            {t('case.details.suggestedTimeslots') || 'Suggested Timeslots'}\n          </h2>\n          \n          {/* Timeslots Grid */}\n          <div className=\"flex flex-wrap justify-center gap-3 mb-6\">\n            {currentCase.appointments\n              .filter(appointment => appointment.meetingStatus === 'suggested')\n              .map((appointment) => {\n                const appointmentDate = new Date(appointment.scheduledStart || '');\n                const isSelected = selectedTimeslotId === appointment.id;\n                \n                return (\n                  <button\n                    key={appointment.id}\n                    onClick={() => {\n                      // Only allow selection for patients\n                      if (userGroups?.includes('patient')) {\n                        setSelectedTimeslotId(isSelected ? null : (appointment.id || null));\n                      }\n                    }}\n                    disabled={!userGroups?.includes('patient')}\n                    className={`\n                      px-4 py-3 rounded-lg border-2 text-center min-w-[200px] transition-all duration-200\n                      ${isSelected \n                        ? 'border-primary-500 bg-primary-50 text-primary-700' \n                        : 'border-border-secondary bg-background-primary text-foreground-primary hover:border-primary-300'\n                      }\n                      ${!userGroups?.includes('patient') \n                        ? 'cursor-default opacity-75' \n                        : 'cursor-pointer hover:shadow-md'\n                      }\n                    `}\n                  >\n                    <div className=\"font-medium\">\n                      {appointmentDate.toLocaleDateString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                        weekday: 'long',\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric',\n                        timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                      })}\n                    </div>\n                    <div className=\"text-sm text-foreground-secondary\">\n                      {appointmentDate.toLocaleTimeString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                        hour: '2-digit',\n                        minute: '2-digit',\n                        timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                      })}\n                    </div>\n                    <div className=\"text-xs text-foreground-secondary mt-1\">\n                      {t('case.details.duration') || 'Duration'}: {appointment.durationMinutes || 30} min\n                    </div>\n                  </button>\n                );\n              })}\n          </div>\n          \n          {/* Action Buttons - Only for patients */}\n          {userGroups?.includes('patient') && (\n            <div className=\"flex justify-center gap-4\">\n              <button\n                onClick={handleDeclineTimeslot}\n                disabled={isAccepting}\n                className={`\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200 border-2\n                  ${!isAccepting\n                    ? 'border-red-500 text-red-600 hover:bg-red-50 hover:border-red-600'\n                    : 'border-gray-300 text-gray-400 cursor-not-allowed'\n                  }\n                `}\n              >\n                {isAccepting \n                  ? (t('common.working') || 'Working...') \n                  : (t('case.details.declineTimeslot') || 'Decline')\n                }\n              </button>\n              <button\n                onClick={handleAcceptTimeslot}\n                disabled={!selectedTimeslotId || isAccepting}\n                className={`\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200\n                  ${selectedTimeslotId && !isAccepting\n                    ? 'bg-primary-600 text-white hover:bg-primary-700 shadow-md'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  }\n                `}\n              >\n                {isAccepting \n                  ? (t('common.working') || 'Working...') \n                  : (t('case.details.acceptTimeslot') || 'Accept Timeslot')\n                }\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Appointment Arranged Info Box (shown when status is ARRANGED) */}\n      {StatusUtils.extractStatus(currentCase.status) === CASE_STATUS.ARRANGED && currentCase.appointments && (\n        <div className=\"mb-6 bg-green-50 border-2 border-green-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                <CalendarDaysIcon className=\"w-5 h-5 text-green-600\" />\n              </div>\n            </div>\n            <div className=\"ml-4 flex-1\">\n              <h3 className=\"text-lg font-semibold text-green-800 mb-2\">\n                {t('case.details.appointmentArranged.title')}\n              </h3>\n              \n              {/* Appointment Details */}\n              {currentCase.appointments\n                .filter(appointment => appointment.meetingStatus === 'accepted' || appointment.meetingStatus === 'arranged')\n                .map((appointment) => {\n                  const appointmentDate = new Date(appointment.scheduledStart || '');\n                  \n                  return (\n                    <div key={appointment.id} className=\"bg-white rounded-md p-4 mb-4 border border-green-200\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.date')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointmentDate.toLocaleDateString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                              weekday: 'long',\n                              year: 'numeric',\n                              month: 'long',\n                              day: 'numeric',\n                              timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                            })}\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.time')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointmentDate.toLocaleTimeString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                              hour: '2-digit',\n                              minute: '2-digit',\n                              timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                            })}\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.duration')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointment.durationMinutes || 30} min\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Meeting Link (if available) */}\n                      {appointment.meetingUrl && (\n                        <div className=\"mt-4 pt-4 border-t border-green-200\">\n                          <div className=\"text-sm font-medium text-green-700 mb-2\">\n                            Meeting Link:\n                          </div>\n                          <a \n                            href={appointment.meetingUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors\"\n                          >\n                            <LinkIcon className=\"w-4 h-4 mr-2\" />\n                            Join Meeting\n                          </a>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              \n              {/* Instructions */}\n              <div className=\"text-green-700 text-sm leading-relaxed\">\n                {t('case.details.appointmentArranged.message')}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content - Grid Layout */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Medical Form - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">\n              {currentCase.has_diagnosis ? t('case.details.diagnosis') : t('case.details.medicalForm')}\n            </h2>\n            <div className=\"space-y-4\">\n              {currentCase.has_diagnosis ? (\n                <AttachmentList\n                  items={(attachments || []).filter(a => a.is_diagnosis).map((attachment, index) => ({\n                    id: String(attachment.id || index),\n                    label: attachment.type.name === 'Link' ? (attachment.description || attachment.url || `Link ${index + 1}`) : (attachment.originalName || `Document ${index + 1}`),\n                    typeName: attachment.type.name,\n                    showDelete: !attachment.is_diagnosis,\n                    metaRight: formatDate(attachment.createdAt, language),\n                  }))}\n                  showOpen={true}\n                  openText={(item) => {\n                    const type = (attachments || []).find(a => String(a.id) === String(item.id))?.type?.name || '';\n                    return getAttachmentButtonText(type);\n                  }}\n                  onOpen={(id) => {\n                    const a = (attachments || []).find(x => String(x.id) === String(id));\n                    if (a) handleOpenAttachment(a);\n                  }}\n                  deleteText={t('case.details.delete') || 'Delete'}\n                />\n              ) : (\n                <>\n                  {currentCase.symptoms && currentCase.symptoms.length > 0 ? (\n                    currentCase.symptoms.map((symptom, index) => (\n                      <div key={index} className=\"bg-neutral-50 rounded-md p-4 border border-border-primary\">\n                        <div className=\"font-medium text-foreground-primary mb-1\">\n                          {`${t('case.details.symptom')} ${index + 1} - ${translateSymptomSeverity(symptom.severity)} (${translateSymptomDuration(symptom.duration)})`}\n                        </div>\n                        <div className=\"text-foreground-secondary\">\n                          {symptom.description || t('case.details.answerOfUser')}\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"text-center py-8 text-foreground-tertiary\">\n                      <p className=\"text-sm\">No symptoms recorded</p>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Notes - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.notes')}</h2>\n            <div className=\"bg-neutral-50 rounded-md p-4 min-h-[200px] border border-border-primary\">\n              <textarea\n                className=\"w-full h-full bg-transparent border-none outline-none resize-none text-foreground-secondary placeholder-foreground-tertiary\"\n                placeholder={t('case.details.notesPlaceholder')}\n                defaultValue={currentCase.case_notes || ''}\n                rows={8}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Documents - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.documents')}</h2>\n            <div className=\"space-y-3\">\n              <AttachmentList\n                items={(attachments || []).filter(a => !a.is_diagnosis).map((attachment, index) => ({\n                  id: String(attachment.id || index),\n                  label: attachment.type.name === 'Link' ? (attachment.description || attachment.url || `Link ${index + 1}`) : (attachment.originalName || `Document ${index + 1}`),\n                  typeName: attachment.type.name,\n                  showDelete: !attachment.is_diagnosis,\n                  metaRight: formatDate(attachment.createdAt, language),\n                }))}\n                showOpen={true}\n                openText={(item) => {\n                  const type = (attachments || []).find(a => String(a.id) === String(item.id))?.type?.name || '';\n                  return getAttachmentButtonText(type);\n                }}\n                onOpen={(id) => {\n                  const a = (attachments || []).find(x => String(x.id) === String(id));\n                  if (a) handleOpenAttachment(a);\n                }}\n                onDelete={(id) => {\n                  const a = (attachments || []).find(x => String(x.id) === String(id));\n                  if (a) handleDeleteAttachment(a);\n                }}\n                deleteText={t('case.details.delete') || 'Delete'}\n              />\n              <div className=\"flex justify-end pt-4\">\n                <button onClick={() => setIsUploadOpen(true)} className=\"bg-primary-600 text-white px-6 py-2 rounded-md font-medium hover:bg-primary-700 transition-colors\">\n                  {t('case.details.upload')}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Additional Info - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.infos')}</h2>\n            <div className=\"bg-neutral-50 rounded-md p-4 space-y-3 border border-border-primary\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.customerName')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer ? `${currentCase.customer.firstName || ''} ${currentCase.customer.lastName || ''}`.trim() || t('demographic.notProvided') : t('demographic.userNotFound')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.appointmentDate')}</span>\n                <span className=\"text-foreground-secondary\">25.08.2025</span>\n              </div>\n              <hr className=\"border-border-primary\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.gender')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.gender ? translateGender(currentCase.customer.gender as Gender) : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.height')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.height ? `${currentCase.customer.height}cm` : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.weight')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.weight ? `${currentCase.customer.weight}kg` : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.dateOfBirth')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.dateOfBirth ? (() => {\n                    const dateString = typeof currentCase.customer!.dateOfBirth === 'string' \n                      ? currentCase.customer!.dateOfBirth as string \n                      : currentCase.customer!.dateOfBirth.toISOString();\n                    return formatDate(dateString, language);\n                  })() : t('demographic.notProvided')}\n                </span>\n              </div>\n              <hr className=\"border-border-primary\" />\n              {/* Additional info fields can be added here as they become available */}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={deleteModal.isOpen}\n        onClose={() => setDeleteModal({ isOpen: false, attachment: null })}\n        onConfirm={confirmDelete}\n        title={t('case.details.deleteConfirmTitle')}\n        message={t('case.details.deleteConfirm')}\n      />\n\n      {/* Accept Offer Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={isAcceptModalOpen}\n        onClose={() => setIsAcceptModalOpen(false)}\n        onConfirm={confirmAcceptOffer}\n        title={t('case.details.acceptOfferTitle') || 'Accept offer'}\n        message={(t('case.details.acceptOfferMessage') || `Do you want to accept the offer${offerDocument?.doc_no ? ` ${offerDocument.doc_no}` : ''}? By accepting, you confirm that you have read and understood the offer.`) as string}\n        confirmText={isAccepting ? (t('common.working') || 'Working...') : (t('case.details.acceptOffer') || 'Accept offer')}\n        cancelText={t('case.details.cancel') || 'Cancel'}\n      />\n\n      {/* Upload Wizard */}\n      <UploadAttachmentWizard\n        isOpen={isUploadOpen}\n        onClose={() => setIsUploadOpen(false)}\n        caseId={typeof currentCase.id === 'number' ? currentCase.id : (currentCase.id ? Number(currentCase.id) : undefined)}\n        onUploaded={async () => {\n          // After successful upload, refetch the case to refresh attachments\n          if (!currentCase.id) return;\n          const http = HttpService.getInstance();\n          const refreshed = await http.getCaseById(String(currentCase.id));\n          setAttachments(refreshed.attachments || []);\n        }}\n      />\n\n      {/* Status flow modal */}\n      <StatusFlowModal\n        isOpen={isStatusInfoOpen}\n        onClose={() => setIsStatusInfoOpen(false)}\n        currentStatus={StatusUtils.extractStatus(currentCase.status)}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport { Case } from '@/types/case';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { useLoadingStore } from '@/services/loadingService';\nimport { DocumentTextIcon, ClockIcon, BoltIcon } from '@heroicons/react/24/outline';\n\ninterface CaseListProps {\n  cases: Case[];\n  onCaseClick?: (caseId: string) => void;\n  className?: string;\n  viewMode?: 'standard' | 'arranged';\n}\n\nconst CaseList: React.FC<CaseListProps> = ({ cases, onCaseClick, className = '', viewMode = 'standard' }) => {\n  const { t, translateStatus } = useLanguage();\n  const { isLoading } = useLoadingStore();\n\n  const getStatusColor = (status: Case['status']) => {\n    if (!status || !status.name) {\n      return 'status-neutral';\n    }\n    const caseStatus = StatusUtils.toCaseStatus(status.name);\n    if (caseStatus) {\n      return StatusUtils.getStatusColorClasses(caseStatus);\n    }\n    return 'status-neutral';\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const getStatusLabel = (status: Case['status']) => {\n    if (!status || !status.name) {\n      return t('status.unknown') || 'Unknown';\n    }\n    const caseStatus = StatusUtils.toCaseStatus(status.name);\n    if (caseStatus) {\n      return translateStatus(caseStatus);\n    }\n    return status.name.replace(/_/g, ' ');\n  };\n\n  const getCaseDescription = (caseItem: Case): string => {\n    // If case has diagnosis, show diagnosis text\n    if (caseItem.has_diagnosis) {\n      return t('case.details.withExistingDiagnosis') || 'With an existing diagnosis';\n    }\n    \n    // First try to use the case description\n    if (caseItem.description && caseItem.description.trim()) {\n      return caseItem.description;\n    }\n    \n    // If no description, try to use the first symptom's description\n    if (caseItem.symptoms && caseItem.symptoms.length > 0) {\n      const firstSymptom = caseItem.symptoms[0];\n      if (firstSymptom.description && firstSymptom.description.trim()) {\n        // Truncate if too long and add ellipsis\n        const description = firstSymptom.description.trim();\n        return description.length > 100 ? `${description.substring(0, 100)}...` : description;\n      }\n    }\n    \n    // If no symptoms, try case notes\n    if (caseItem.case_notes && caseItem.case_notes.trim()) {\n      const notes = caseItem.case_notes.trim();\n      return notes.length > 100 ? `${notes.substring(0, 100)}...` : notes;\n    }\n    \n    // Fallback to translated \"no description\"\n    return t('case.noDescription') || 'No description';\n  };\n\n  // Get accepted appointment (the one that is arranged/accepted)\n  const getAcceptedAppointment = (caseItem: Case) => {\n    if (!caseItem.appointments || caseItem.appointments.length === 0) {\n      return null;\n    }\n    \n    // Find appointment with scheduledStart (accepted appointment)\n    // Usually the most recent one with a scheduledStart\n    const acceptedAppointments = caseItem.appointments\n      .filter(apt => apt.scheduledStart)\n      .sort((a, b) => {\n        const dateA = a.scheduledStart ? new Date(a.scheduledStart).getTime() : 0;\n        const dateB = b.scheduledStart ? new Date(b.scheduledStart).getTime() : 0;\n        return dateB - dateA; // Most recent first\n      });\n    \n    return acceptedAppointments.length > 0 ? acceptedAppointments[0] : null;\n  };\n\n  // Format duration from minutes to readable format\n  const formatDuration = (minutes?: number): string => {\n    if (!minutes) return '';\n    if (minutes < 60) {\n      return `${minutes} min`;\n    }\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    if (mins === 0) {\n      return `${hours} ${hours === 1 ? 'hour' : 'hours'}`;\n    }\n    return `${hours}h ${mins}min`;\n  };\n\n  // Get customer name\n  const getCustomerName = (caseItem: Case): string => {\n    if (caseItem.customer?.firstName && caseItem.customer?.lastName) {\n      return `${caseItem.customer.firstName} ${caseItem.customer.lastName}`;\n    }\n    if (caseItem.customer?.firstName) {\n      return caseItem.customer.firstName;\n    }\n    if (caseItem.customer?.lastName) {\n      return caseItem.customer.lastName;\n    }\n    return t('case.details.customerName')?.replace(':', '') || 'Customer';\n  };\n\n  // Show loading state when data is being fetched\n  if (isLoading) {\n    return (\n      <div className={`text-center py-12 ${className}`}>\n        <div className=\"text-foreground-tertiary\">\n          <h3 className=\"text-lg font-semibold text-foreground-primary mb-2\">\n            {t('common.loading') || 'Loading cases...'}\n          </h3>\n          <p className=\"text-sm text-foreground-secondary\">\n            {t('case.loadingDescription') || 'Please wait while we fetch your cases.'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (cases.length === 0) {\n    return (\n      <div className={`text-center py-12 ${className}`}>\n        <div className=\"text-foreground-tertiary\">\n          <DocumentTextIcon className=\"mx-auto h-16 w-16 text-foreground-tertiary mb-4\" />\n          <h3 className=\"text-lg font-semibold text-foreground-primary mb-2\">\n            {t('case.noCases') || 'No cases found'}\n          </h3>\n          <p className=\"text-sm text-foreground-secondary\">\n            {t('case.noCasesDescription') || 'Get started by creating your first case.'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {cases.map((caseItem) => (\n        <div\n          key={caseItem.id}\n          className={`bg-background-primary border border-border-primary rounded-lg p-6 hover:shadow-lg transition-all duration-200 ${\n            onCaseClick ? 'cursor-pointer hover:border-border-secondary' : ''\n          }`}\n          onClick={() => onCaseClick?.(caseItem.id?.toString() || '')}\n        >\n          <div className=\"flex items-start justify-between\">\n            {/* Left side - Content */}\n            <div className=\"flex-1 min-w-0\">\n              {viewMode !== 'arranged' && (\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ${getStatusColor(caseItem.status)}`}>\n                    {getStatusLabel(caseItem.status)}\n                  </span>\n                </div>\n              )}\n              \n              {viewMode === 'arranged' ? (\n                <>\n                  {/* Arranged view: Date and duration row */}\n                  {(() => {\n                    const appointment = getAcceptedAppointment(caseItem);\n                    return (\n                      <div className=\"flex items-center gap-4 text-sm text-foreground-secondary mb-2\">\n                        <div>\n                          <span className=\"font-medium text-foreground-primary\">{t('case.details.appointmentArranged.date') || 'Appointment Date'}:</span> {appointment?.scheduledStart ? formatDate(appointment.scheduledStart) : (formatDate(caseItem.createdAt || ''))}\n                        </div>\n                        {appointment?.durationMinutes && (\n                          <div className=\"flex items-center gap-1\">\n                            <ClockIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                            <span className=\"font-medium text-foreground-primary\">{t('case.details.duration') || 'Duration'}:</span> {formatDuration(appointment.durationMinutes)}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })()}\n\n                  {/* Arranged view: Customer name */}\n                  <div className=\"text-base text-foreground-primary font-medium mb-2\">\n                    {getCustomerName(caseItem)}\n                  </div>\n                  \n                  {/* Arranged view: Additional content can go here if needed */}\n                </>\n              ) : (\n                <>\n                  {/* Standard view: Case description */}\n                  <div className=\"text-base text-foreground-primary font-medium mb-2\">\n                    {getCaseDescription(caseItem)}\n                  </div>\n                  \n                  {/* Additional case details */}\n                  {(caseItem.duration || caseItem.severity) && (\n                    <div className=\"flex items-center space-x-6 text-sm text-foreground-secondary\">\n                      {caseItem.duration && (\n                        <div className=\"flex items-center space-x-1\">\n                          <ClockIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                          <span>{t('case.duration') || 'Duration'}: {caseItem.duration}</span>\n                        </div>\n                      )}\n                      {caseItem.severity && (\n                        <div className=\"flex items-center space-x-1\">\n                          <BoltIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                          <span>{t('case.severity') || 'Severity'}: {caseItem.severity}</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n            \n            {/* Right side - Status/Date */}\n            <div className=\"flex-shrink-0 ml-4 text-right\">\n              {viewMode === 'arranged' ? (\n                <>\n                  {/* Arranged view: Status pill aligned right */}\n                  <div className=\"flex justify-end\">\n                    <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center text-foreground-primary ${getStatusColor(caseItem.status)}`}>\n                      {getStatusLabel(caseItem.status)}\n                    </span>\n                  </div>\n                </>\n              ) : (\n                <>\n                  {/* Standard view: Creation date */}\n                  <div className=\"text-sm text-foreground-tertiary\">\n                    <div className=\"font-medium text-foreground-primary\">\n                      {t('case.created') || 'Created'}\n                    </div>\n                    <div className=\"text-foreground-tertiary\">\n                      {formatDate(caseItem.createdAt || '')}\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default CaseList;\n","import React from 'react';\nimport { Case } from '@/types/case';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { InformationCircleIcon } from '@heroicons/react/24/outline';\nimport { CASE_STATUS } from '@/types/status';\n\ninterface CaseWorkflowInfoProps {\n  caseData: Case;\n}\n\nexport const CaseWorkflowInfo: React.FC<CaseWorkflowInfoProps> = ({ caseData }) => {\n  const { userGroups } = useAuth();\n  const { t } = useLanguage();\n\n  return (\n    <>\n      {/* Payment info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.WAITING_FOR_PAYMENT && (\n        <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-blue-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-blue-800\">\n                {t('case.details.paymentWarning.title') || 'Payment Required'}\n              </h3>\n              <div className=\"mt-2 text-sm text-blue-700\">\n                <p>\n                  {t('case.details.paymentWarning.message') || 'Please pay the invoice to continue with your case. You received the invoice via email. You can also download the invoice below.'}\n                </p>\n              </div>\n              <div className=\"mt-3 text-xs text-blue-600\">\n                <p>\n                  {t('case.details.paymentWarning.alreadyPaid') || 'Already paid? This info will disappear once payment is confirmed.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}      \n\n      {/* Offer info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.OFFER_SENT && (\n        <div className=\"mb-6 bg-green-50 border border-green-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-green-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-green-800\">\n                {t('case.details.offerInfo.title') || 'Offer Received'}\n              </h3>\n              <div className=\"mt-2 text-sm text-green-700\">\n                <p>\n                  {t('case.details.offerInfo.message') || 'Please read the offer carefully. You received it via email or you can download it below. You need to accept it to continue.'}\n                </p>\n              </div>\n              <div className=\"mt-3 text-xs text-green-600\">\n                <p>\n                  {t('case.details.offerInfo.validity') || 'The offer is valid for 2 weeks.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Timeslots info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.TIMESLOTS_SENT && (\n        <div className=\"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-purple-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-purple-800\">\n                {t('case.details.timeslotsInfo.title') || 'Choose Your Appointment'}\n              </h3>\n              <div className=\"mt-2 text-sm text-purple-700\">\n                <p>\n                  {t('case.details.timeslotsInfo.message') || 'Please select one of the suggested appointment times below to continue with your case.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n}\n\nexport const ConfirmationModal: React.FC<ConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmText,\n  cancelText\n}) => {\n  const { t } = useLanguage();\n\n  if (!isOpen) return null;\n\n  const handleConfirm = () => {\n    onConfirm();\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* Backdrop */}\n      <div \n        className=\"absolute inset-0 bg-black bg-opacity-50\"\n        onClick={onClose}\n      />\n      \n      {/* Modal */}\n      <div className=\"relative bg-background-primary rounded-lg shadow-xl max-w-md w-full mx-4 p-6\">\n        {/* Header */}\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-foreground-primary\">\n            {title}\n          </h3>\n        </div>\n        \n        {/* Content */}\n        <div className=\"mb-6\">\n          <p className=\"text-foreground-secondary\">\n            {message}\n          </p>\n        </div>\n        \n        {/* Actions */}\n        <div className=\"flex justify-end gap-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm font-medium text-foreground-secondary bg-background-secondary border border-border-primary rounded-md hover:bg-background-tertiary transition-colors\"\n          >\n            {cancelText || t('case.details.cancel')}\n          </button>\n          <button\n            onClick={handleConfirm}\n            className=\"px-4 py-2 text-sm font-medium text-white border border-accent-600 rounded-md bg-accent-500 hover:bg-accent-600 transition-colors\"\n          >\n            {confirmText || t('case.details.delete')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}; ","import { UseFormRegister, RegisterOptions, FieldValues, Path } from 'react-hook-form';\nimport { ExclamationCircleIcon } from '@heroicons/react/24/outline';\n\ninterface BaseCurrencyInputFieldProps {\n  label: string;\n  error?: string;\n  required?: boolean;\n  tooltip?: string;\n  className?: string;\n  currency?: string;\n  placeholder?: string;\n  disabled?: boolean;\n}\n\ninterface ReactHookFormProps<T extends FieldValues> extends BaseCurrencyInputFieldProps {\n  name: Path<T>;\n  register: UseFormRegister<T>;\n  validation?: RegisterOptions<T>;\n}\n\ninterface ControlledInputProps extends BaseCurrencyInputFieldProps {\n  name?: string;\n  value: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\n// React Hook Form version\nexport const CurrencyInputField = <T extends FieldValues>({\n  label,\n  name,\n  register,\n  error,\n  required = false,\n  tooltip,\n  validation = {},\n  className = '',\n  currency = 'LEI',\n  placeholder,\n  disabled = false\n}: ReactHookFormProps<T>) => {\n  return (\n    <div className={`mb-4 ${className}`}>\n      <div className=\"flex items-center gap-1\">\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {label}\n          {required && <span className=\"text-error-500 ml-1\">*</span>}\n        </label>\n        {tooltip && (\n          <div className=\"relative group\">\n            <span className=\"cursor-help text-foreground-tertiary hover:text-foreground-secondary\">\n              <ExclamationCircleIcon className=\"w-4 h-4\" />\n            </span>\n            <div className=\"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48\">\n              {tooltip}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"relative\">\n        <input\n          type=\"number\"\n          min=\"0\"\n          step=\"0.01\"\n          placeholder={placeholder}\n          disabled={disabled}\n          {...register(name, {\n            min: { value: 0, message: 'Amount must be positive' },\n            ...(validation || {})\n          })}\n          className=\"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed\"\n        />\n        <div className=\"absolute top-2 right-0 flex items-center pr-3\">\n          <div className=\"h-6 border-l border-slate-200 mr-2\"></div>\n          <span className=\"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none\">\n            {currency}\n          </span>\n        </div>\n      </div>\n      {error && <p className=\"mt-2 text-sm text-error-600\">{error}</p>}\n    </div>\n  );\n};\n\n// Controlled input version\nexport const CurrencyInputFieldControlled = ({\n  label,\n  name,\n  value,\n  onChange,\n  error,\n  required = false,\n  tooltip,\n  className = '',\n  currency = 'LEI',\n  placeholder,\n  disabled = false\n}: ControlledInputProps) => {\n  return (\n    <div className={`mb-4 ${className}`}>\n      <div className=\"flex items-center gap-1\">\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {label}\n          {required && <span className=\"text-error-500 ml-1\">*</span>}\n        </label>\n        {tooltip && (\n          <div className=\"relative group\">\n            <span className=\"cursor-help text-foreground-tertiary hover:text-foreground-secondary\">\n              <ExclamationCircleIcon className=\"w-4 h-4\" />\n            </span>\n            <div className=\"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48\">\n              {tooltip}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"relative\">\n        <input\n          type=\"number\"\n          min=\"0\"\n          step=\"0.01\"\n          placeholder={placeholder}\n          disabled={disabled}\n          value={value}\n          onChange={onChange}\n          name={name}\n          className=\"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed\"\n        />\n        <div className=\"absolute top-2 right-0 flex items-center pr-3\">\n          <div className=\"h-6 border-l border-slate-200 mr-2\"></div>\n          <span className=\"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none\">\n            {currency}\n          </span>\n        </div>\n      </div>\n      {error && <p className=\"mt-2 text-sm text-error-600\">{error}</p>}\n    </div>\n  );\n};\n","'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n  const { t } = useLanguage();\n\n  useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/auth/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background-secondary\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n          <p className=\"text-body\">{t('common.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null; // Will redirect to login\n  }\n\n  return <>{children}</>;\n}; ","'use client';\n\nimport React, { useMemo } from 'react';\nimport Modal from '@/components/common/Modal';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { CaseStatus, CASE_STATUS } from '@/types/status';\n\ninterface StatusFlowModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  currentStatus?: CaseStatus | null;\n}\n\n// Use shared transition map from StatusUtils\nconst getValidTransitions = (status: CaseStatus): CaseStatus[] => StatusUtils.getValidTransitions(status);\n\nexport const StatusFlowModal: React.FC<StatusFlowModalProps> = ({ isOpen, onClose, currentStatus }) => {\n  const { t } = useLanguage();\n  // Explicit lifecycle order (memoized to keep a stable reference)\n  const statusesInOrder: CaseStatus[] = useMemo(() => [\n    CASE_STATUS.NEW,\n    CASE_STATUS.OFFER_SENT,\n    CASE_STATUS.WAITING_FOR_PAYMENT,\n    CASE_STATUS.PAID,\n    CASE_STATUS.TIMESLOTS_SENT,\n    CASE_STATUS.ARRANGED,\n    CASE_STATUS.IN_CONSULTATION,\n    CASE_STATUS.FINISHED,\n    CASE_STATUS.DECLINED,\n  ], []);\n\n  const allowedNext = currentStatus ? getValidTransitions(currentStatus) : [];\n\n  // Compute a unified badge width based on the widest translated label\n  const badgeWidth = useMemo(() => {\n    const labels = statusesInOrder.map((s) => t(StatusUtils.statusToTranslationKey(s)));\n    if (typeof window === 'undefined') {\n      // Fallback approximation for SSR (won't be used in client-only modal)\n      const maxChars = Math.max(...labels.map((l) => l.length));\n      return Math.ceil(maxChars * 8 + 24); // ~8px per char + padding\n    }\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return 0;\n    // font-medium ~ 500 weight, text-sm ~ 14px\n    ctx.font = '500 14px system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif';\n    let max = 0;\n    for (const label of labels) {\n      const w = ctx.measureText(label).width;\n      if (w > max) max = w;\n    }\n    // Add horizontal padding used by the pill (px-3 => ~24px total)\n    return Math.ceil(max + 24);\n  }, [t, statusesInOrder]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} size=\"lg\" title={t('status.flowTitle') || 'Status flow'}>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"text-sm text-foreground-secondary\">{t('status.setByAdmin')}</div>\n\n        {/* Overview of all statuses in lifecycle order as a vertical stepper timeline */}\n        <div>\n          <div className=\"text-sm text-foreground-secondary mb-3\">{t('status.flowOverview') || 'Overview of statuses and their meaning:'}</div>\n          <ol className=\"grid gap-3 m-0 p-0 list-none\">\n            {statusesInOrder.map((s) => {\n              const info = StatusUtils.getStatusInfo(s);\n              const colorClass = StatusUtils.getStatusColorClasses(s);\n              const isCurrent = currentStatus === s;\n              const isNext = allowedNext.includes(s);\n              return (\n                <li key={s} className=\"grid grid-cols-[24px_1fr] gap-3 items-stretch relative\">\n                  {/* Rail */}\n                  <div className=\"relative flex items-stretch justify-center\">\n                    {/* vertical line spanning full item height */}\n                    <div className=\"absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-0.5 bg-border-primary\" />\n                    {/* centered dot */}\n                    <div className={`absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full ${isCurrent ? 'bg-primary-600 ring-4 ring-primary-600/20' : 'bg-foreground-tertiary ring-4 ring-white'}`} />\n                  </div>\n                  {/* Card */}\n                  <div className={`w-full min-h-[72px] bg-background-primary border border-border-primary rounded-xl shadow-sm p-4 ${isNext ? 'ring-1 ring-primary-600/50' : ''}`}>\n                    <div className=\"flex items-center gap-4\">\n                      <span\n                        className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shrink-0 justify-center ${colorClass}`}\n                        style={{ width: badgeWidth ? `${badgeWidth}px` : undefined }}\n                      >\n                        {t(StatusUtils.statusToTranslationKey(s))}\n                      </span>\n                      <span className=\"text-sm text-foreground-secondary\">\n                        {t(`status.flow.${s.toLowerCase()}`) || info.description}\n                      </span>\n                    </div>\n                  </div>\n                </li>\n              );\n            })}\n          </ol>\n        </div>\n\n        {/* Allowed transitions from current status */}\n        {/* Note: allowed transitions are emphasized inline by ring on target statuses */}\n      </div>\n    </Modal>\n  );\n};\n\nexport default StatusFlowModal;\n\n\n","export type TranslateFn = (key: string) => string;\n\nfunction capitalizeFirstLetter(input: string): string {\n  if (!input) return '';\n  return input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();\n}\n\n/**\n * Translate a backend document type into a localized label using i18n.\n * Known types: offer, invoice. Falls back to a humanized value.\n */\nexport function translateDocumentType(docType: string | undefined | null, t: TranslateFn): string {\n  if (!docType) return '';\n  const normalized = String(docType).trim().toLowerCase();\n  switch (normalized) {\n    case 'offer':\n      return t('documents.offer') || 'Offer';\n    case 'invoice':\n      return t('documents.invoice') || 'Invoice';\n    default:\n      return capitalizeFirstLetter(normalized);\n  }\n}\n\n\n","import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BoltIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BoltIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CalendarDaysIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CalendarDaysIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentTextIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentTextIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction LinkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(LinkIcon);\nexport default ForwardRef;"],"names":["caseData","onCaseUpdated","doctors","CaseDetailsAdmin","t","translateStatus","language","useLanguage","adminNotes","setAdminNotes","useState","admin_notes","nextStatus","setNextStatus","appointmentDate1","setAppointmentDate1","appointmentDate2","setAppointmentDate2","appointmentDuration","setAppointmentDuration","appointmentError","setAppointmentError","selectedDoctorId","setSelectedDoctorId","getMinAppointmentDate","now","Date","twoDaysFromNow","getTime","toISOString","slice","isAdmin","setIsAdmin","offerAmount","setOfferAmount","offerText","setOfferText","useEffect","mounted","session","fetchAuthSession","idPayload","tokens","idToken","payload","groups","includes","currentStatus","StatusUtils","toCaseStatus","status","name","validNextStatuses","getValidTransitions","canEditNotes","isActiveStatus","canSendOffer","CASE_STATUS","NEW","canMarkPaid","WAITING_FOR_PAYMENT","canSetAppointment","PAID","id","handleSaveNotes","http","HttpService","getInstance","updated","updateCase","String","handleSetStatus","statusPayload","handleSendOffer","amount","Number","sendOffer","caseId","text","amount_gross","handleMarkInvoicePaid","markInvoicePaid","handleSetAppointment","suggestedAppointments","push","scheduledStart","meetingStatus","durationMinutes","doctorId","suggestAppointment","buttonWidthClass","div","className","h2","Divider","marginClass","label","textarea","value","onChange","e","target","disabled","button","onClick","CurrencyInputFieldControlled","placeholder","style","backgroundColor","appointments","length","h3","map","statusColor","appointment","formatDate","formatTime","span","doctorName","p","strong","input","type","min","select","option","doctor","user","firstName","lastName","title","s","ExclamationTriangleIcon","CaseDetails","onUpdated","userGroups","useAuth","translateSymptomSeverity","translateSymptomDuration","translateGender","deleteModal","setDeleteModal","isOpen","attachment","attachments","setAttachments","currentCase","setCurrentCase","canSeeDocuments","setCanSeeDocuments","downloadingDocType","setDownloadingDocType","isAcceptModalOpen","setIsAcceptModalOpen","isAccepting","setIsAccepting","selectedTimeslotId","setSelectedTimeslotId","Array","isArray","isPatient","isOfferSent","extractStatus","OFFER_SENT","offerDocument","documents","find","d","doc_type","toLowerCase","handleDeleteAttachment","confirmDelete","deleteAttachment","attachmentId","prev","filter","a","getAttachmentButtonText","typeName","handleOpenAttachment","url","getAttachmentUrl","window","open","handleDownloadDocument","docType","getDocumentUrl","document","createElement","href","download","body","appendChild","click","remove","confirmAcceptOffer","updatedCase","acceptOffer","handleAcceptTimeslot","acceptAppointment","handleDeclineTimeslot","declineAppointment","isUploadOpen","setIsUploadOpen","isStatusInfoOpen","setIsStatusInfoOpen","h1","getStatusColor","extracted","getStatusColorClasses","getStatusLabel","replace","CaseWorkflowInfo","doc","idx","translateDocumentType","DocumentTextIcon","doc_no","ArrowDownTrayIcon","canAcceptOffer","TIMESLOTS_SENT","appointmentDate","isSelected","toLocaleDateString","weekday","year","month","day","timeZone","toLocaleTimeString","hour","minute","ARRANGED","CalendarDaysIcon","meetingUrl","rel","LinkIcon","has_diagnosis","AttachmentList","items","is_diagnosis","index","description","originalName","showDelete","metaRight","createdAt","showOpen","openText","item","onOpen","x","deleteText","symptoms","symptom","severity","duration","defaultValue","case_notes","rows","onDelete","customer","trim","hr","gender","height","weight","dateOfBirth","dateString","ConfirmationModal","onClose","onConfirm","message","confirmText","cancelText","UploadAttachmentWizard","undefined","onUploaded","refreshed","getCaseById","StatusFlowModal","cases","onCaseClick","CaseList","viewMode","isLoading","useLoadingStore","caseStatus","date","getCaseDescription","caseItem","firstSymptom","substring","notes","getAcceptedAppointment","acceptedAppointments","apt","sort","b","dateA","dateB","formatDuration","minutes","hours","Math","floor","mins","getCustomerName","toString","ClockIcon","BoltIcon","InformationCircleIcon","handleConfirm","CurrencyInputField","register","error","required","tooltip","validation","currency","ExclamationCircleIcon","step","ProtectedRoute","children","isAuthenticated","loading","router","useRouter","statusesInOrder","useMemo","IN_CONSULTATION","FINISHED","DECLINED","allowedNext","badgeWidth","ceil","maxChars","max","labels","statusToTranslationKey","l","Modal","size","ol","info","getStatusInfo","colorClass","isCurrent","isNext","li","width","normalized","charAt","toUpperCase","React","ForwardRef","titleId","props","svgRef","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin"],"sourceRoot":""}