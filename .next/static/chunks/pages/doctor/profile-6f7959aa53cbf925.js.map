{"version":3,"file":"static/chunks/pages/doctor/profile-6f7959aa53cbf925.js","mappings":"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","sources":["webpack://_N_E/?1a26","webpack://_N_E/./src/components/common/DoctorRoute.tsx","webpack://_N_E/./src/components/doctor/doctor-details-form.tsx","webpack://_N_E/./src/components/doctor/doctor-profile.tsx","webpack://_N_E/./src/pages/doctor/profile.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/doctor/profile\",\n      function () {\n        return require(\"private-next-pages/doctor/profile.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/doctor/profile\"])\n      });\n    }\n  ","'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { fetchAuthSession } from 'aws-amplify/auth';\nimport { ProtectedRoute } from '@/components/common/ProtectedRoute';\n\ninterface DoctorRouteProps {\n  children: React.ReactNode;\n}\n\nexport const DoctorRoute: React.FC<DoctorRouteProps> = ({ children }) => {\n  const router = useRouter();\n  const { t } = useLanguage();\n  const [checkingGroup, setCheckingGroup] = useState(true);\n\n  useEffect(() => {\n    const check = async () => {\n      try {\n        const session = await fetchAuthSession();\n        const idPayload = session.tokens?.idToken?.payload as Record<string, unknown> | undefined;\n        const groups = (idPayload?.['cognito:groups'] as string[] | undefined) || [];\n        if (!groups.includes('doctor')) {\n          router.replace('/user/profile');\n          return;\n        }\n      } finally {\n        setCheckingGroup(false);\n      }\n    };\n    check();\n  }, [router]);\n\n  return (\n    <ProtectedRoute>\n      {checkingGroup ? (\n        <div className=\"min-h-screen flex items-center justify-center bg-background-secondary\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n            <p className=\"text-body\">{t('common.loading')}</p>\n          </div>\n        </div>\n      ) : (\n        <>{children}</>\n      )}\n    </ProtectedRoute>\n  );\n};\n\n","'use client'\n\nimport React, { useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/common/Button';\nimport { DoctorProfile, Specialty } from '@/types';\nimport { HttpService } from '@/services/httpService';\nimport { useNotifications } from '@/contexts/NotificationContext';\nimport DoctorFormFields, { DoctorFormData } from './DoctorFormFields';\n\nconst DoctorDetailsForm: React.FC = () => {\n  const { t } = useLanguage();\n  const { user } = useAuth();\n  const { addNotification } = useNotifications();\n  const httpService = React.useMemo(() => HttpService.getInstance(), []);\n  \n  const [doctor, setDoctor] = useState<DoctorProfile | null>(null);\n  const [specialties, setSpecialties] = useState<DoctorProfile['specialties']>([]);\n  const [availableSpecialties, setAvailableSpecialties] = useState<Specialty[]>([]);\n  const [isSaving, setIsSaving] = useState(false);\n  \n  // For additional specialties section\n  const [additionalSpecialtyId, setAdditionalSpecialtyId] = useState<number | ''>('');\n  const [additionalSubspecialtyId, setAdditionalSubspecialtyId] = useState<number | ''>('');\n\n  const { register, handleSubmit, formState: { errors, isValid }, reset, watch } = useForm<DoctorFormData>({\n    mode: 'onChange',\n    defaultValues: {\n      title: '',\n      licenseNumber: '',\n      licenseExpiryDate: '',\n      bio: '',\n      consultationFee: 0,\n      lan: 'de',\n      firstName: '',\n      lastName: '',\n      specialtyId: 0,\n      subspecialtyId: 0\n    }\n  });\n\n  const watchedSpecialtyId = watch('specialtyId');\n\n  // Load doctor profile and specialties\n  useEffect(() => {\n    const loadData = async () => {     \n      // Load specialties first\n      const specialtiesData = await httpService.getAllSpecialties();\n      setAvailableSpecialties(specialtiesData);\n      \n      // Load doctor profile\n      const doctorsResponse = await httpService.getDoctorSelf();\n\n      if (doctorsResponse) {\n        setDoctor(doctorsResponse);\n      }\n    };\n\n    loadData();\n  }, [httpService]);\n\n  // Initialize form when doctor data is loaded\n  useEffect(() => {\n    if (doctor && availableSpecialties.length > 0) {\n      let matchedSpecialtyId = 0;\n      let matchedSubspecialtyId = 0;\n      let additionalSpecialties: DoctorProfile['specialties'] = [];\n      \n      if (doctor.specialties && doctor.specialties.length > 0) {\n        const primarySpecialty = doctor.specialties.find(spec => spec.isPrimary);\n        if (primarySpecialty) {\n          matchedSpecialtyId = primarySpecialty.specialty.id;\n          matchedSubspecialtyId = primarySpecialty.subspecialty?.id || 0;\n          additionalSpecialties = doctor.specialties.filter(spec => !spec.isPrimary);\n        }\n      }\n\n      reset({\n        title: doctor.title || '',\n        licenseNumber: doctor.licenseNumber || '',\n        licenseExpiryDate: doctor.licenseExpiryDate || '',\n        bio: doctor.bio || '',\n        consultationFee: doctor.consultationFee || 0,\n        lan: doctor.lan || 'de',\n        firstName: doctor.user?.firstName || '',\n        lastName: doctor.user?.lastName || '',\n        specialtyId: matchedSpecialtyId,\n        subspecialtyId: matchedSubspecialtyId\n      });\n      setSpecialties(additionalSpecialties);\n    }\n  }, [doctor, reset, availableSpecialties]);\n\n  // Reset subspecialty when specialty changes\n  useEffect(() => {\n    if (watchedSpecialtyId && watchedSpecialtyId > 0) {\n      const currentValues = watch();\n      reset({ ...currentValues, subspecialtyId: 0 });\n    }\n  }, [watchedSpecialtyId, reset, watch]);\n\n  const getAvailableSubspecialties = (specialtyId: number) => {\n    if (!specialtyId || specialtyId === 0) return [];\n    const specialty = availableSpecialties.find(s => s.id === specialtyId);\n    return specialty?.subspecialties || [];\n  };\n\n  const handleAddSpecialty = () => {\n    if (additionalSpecialtyId) {\n      const selectedSpecialty = availableSpecialties.find(spec => spec.id === Number(additionalSpecialtyId));\n      if (selectedSpecialty) {\n        const selectedSubspecialty = additionalSubspecialtyId ? \n          getAvailableSubspecialties(Number(additionalSpecialtyId)).find(sub => sub.id === Number(additionalSubspecialtyId)) : \n          null;\n        \n        const isDuplicate = specialties?.some(spec => \n          spec.specialty.id === Number(additionalSpecialtyId) && \n          spec.subspecialty?.id === (selectedSubspecialty?.id || null)\n        );\n        \n        if (!isDuplicate) {\n          const newSpecialty = {\n            id: 0,\n            doctorProfileId: 0,\n            specialty: selectedSpecialty,\n            subspecialty: selectedSubspecialty || undefined,\n            isPrimary: false,\n            createdAt: new Date()\n          };\n          \n          setSpecialties(prev => [...(prev || []), newSpecialty]);\n          setAdditionalSubspecialtyId('');\n          setAdditionalSpecialtyId('');\n        }\n      }\n    }\n  };\n\n  const handleRemoveSpecialty = (specialtyIdToRemove: number) => {\n    setSpecialties(prev => (prev || []).filter(spec => spec.specialty.id !== specialtyIdToRemove));\n  };\n\n  const removeNullValues = (obj: unknown): unknown => {\n    if (obj === null || obj === undefined) return undefined;\n    if (Array.isArray(obj)) {\n      return obj.map(removeNullValues).filter(item => item !== undefined);\n    }\n    if (typeof obj === 'object' && obj !== null) {\n      const cleaned: Record<string, unknown> = {};\n      for (const [key, value] of Object.entries(obj)) {\n        const cleanedValue = removeNullValues(value);\n        if (cleanedValue !== undefined && cleanedValue !== null) {\n          cleaned[key] = cleanedValue;\n        }\n      }\n      return Object.keys(cleaned).length > 0 ? cleaned : undefined;\n    }\n    return obj;\n  };\n\n  const onSubmit = async (data: DoctorFormData) => {\n    setIsSaving(true);\n    try {\n      const specialtyId = Number(data.specialtyId);\n      const subspecialtyId = Number(data.subspecialtyId);\n      const consultationFee = Number(data.consultationFee) || 0;\n      \n      let allSpecialties = [...(specialties || [])];\n      \n      if (specialtyId && specialtyId > 0) {\n        const selectedSpecialty = availableSpecialties.find(s => s.id === specialtyId);\n        \n        if (selectedSpecialty) {\n          const selectedSubspecialty = subspecialtyId && subspecialtyId > 0 ? \n            getAvailableSubspecialties(specialtyId).find(sub => sub.id === subspecialtyId) : \n            null;\n          \n          const primarySpecialty = {\n            id: 0,\n            doctorProfileId: 0,\n            specialty: selectedSpecialty,\n            subspecialty: selectedSubspecialty || undefined,\n            isPrimary: true,\n            createdAt: new Date()\n          };\n          \n          allSpecialties = [primarySpecialty, ...allSpecialties];\n        }\n      }\n\n      const doctorData: Partial<DoctorProfile> = {\n        title: data.title,\n        licenseNumber: data.licenseNumber,\n        licenseExpiryDate: data.licenseExpiryDate,\n        isActive: doctor?.isActive ?? true, // Keep existing isActive status\n        bio: data.bio,\n        consultationFee: consultationFee,\n        lan: data.lan,\n        userId: doctor?.userId || user?.id || '',\n        specialties: allSpecialties,\n        user: {\n          ...doctor?.user,\n          firstName: data.firstName,\n          lastName: data.lastName,\n          id: doctor?.user?.id || user?.id || ''\n          // Note: Email is not included as doctors cannot change it\n        }\n      };\n\n      const cleanedDoctorData = removeNullValues(doctorData) as Partial<DoctorProfile>;\n      const updatedDoctor = await httpService.upsertDoctor(cleanedDoctorData as DoctorProfile);\n      \n      setDoctor(updatedDoctor);\n      addNotification('success', 'Profile updated successfully');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        <DoctorFormFields\n          register={register}\n          errors={errors}\n          watch={watch}\n          availableSpecialties={availableSpecialties}\n          specialties={specialties || []}\n          additionalSpecialtyId={additionalSpecialtyId}\n          additionalSubspecialtyId={additionalSubspecialtyId}\n          onAdditionalSpecialtyChange={setAdditionalSpecialtyId}\n          onAdditionalSubspecialtyChange={setAdditionalSubspecialtyId}\n          onAddSpecialty={handleAddSpecialty}\n          onRemoveSpecialty={handleRemoveSpecialty}\n          showEmailField={false}\n          showIsActiveField={false}\n        />\n\n        {/* Footer */}\n        <div className=\"flex justify-end space-x-3 pt-6 border-t border-border-primary\">\n          <Button\n            type=\"submit\"\n            disabled={isSaving || !isValid || !watchedSpecialtyId || watchedSpecialtyId === 0}\n          >\n            {isSaving ? t('common.working') : t('doctor.details.save')}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default DoctorDetailsForm;\n","'use client'\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport SidebarMenu, { MenuItem } from '@/components/common/SidebarMenu';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useAuth } from '@/contexts/AuthContext';\nimport DoctorDetailsForm from './doctor-details-form';\n\ninterface DoctorProfileProps {\n  initialSection?: string;\n}\n\nconst DoctorProfile: React.FC<DoctorProfileProps> = ({ initialSection = 'doctor-details' }) => {\n  const { t } = useLanguage();\n  const { userGroups } = useAuth();\n  const isDoctor = useMemo(() => userGroups.includes('doctor'), [userGroups]);\n  \n  // Menu items for the sidebar\n  const menuItems: MenuItem[] = useMemo(() => {\n    const items: MenuItem[] = [\n      { id: 'doctor-details', label: t('doctor.profile.title') || 'Doctor Profile' },\n      { id: 'security', label: t('profile.security') || 'Security Settings' },\n      { id: 'preferences', label: t('profile.preferences') || 'Preferences' },\n      { id: 'notifications', label: t('profile.notifications') || 'Notifications' },\n    ];\n    return items;\n  }, [t]);\n\n  // State to track the active section\n  const [activeSection, setActiveSection] = useState(initialSection);\n\n  // Update active section when initialSection changes\n  useEffect(() => {\n    const allowedSections = ['doctor-details', 'security', 'preferences', 'notifications'];\n    if (initialSection && allowedSections.includes(initialSection)) {\n      setActiveSection(initialSection);\n    }\n  }, [initialSection]);\n\n  // Components for each section\n  const renderSection = () => {\n    switch (activeSection) {\n      case 'doctor-details':\n        return <DoctorDetailsForm key=\"doctor-details\" />;\n      case 'security':\n        return (\n          <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-4 text-foreground-primary\">{t('profile.security') || 'Security Settings'}</h2>\n            <div className=\"text-center py-8\">\n              <p className=\"text-foreground-secondary\">\n                {t('profile.securityComingSoon') || 'Security settings will be available soon'}\n              </p>\n            </div>\n          </div>\n        );\n      case 'preferences':\n        return (\n          <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-4 text-foreground-primary\">{t('profile.preferences') || 'Preferences'}</h2>\n            <div className=\"text-center py-8\">\n              <p className=\"text-foreground-secondary\">\n                {t('profile.preferencesComingSoon') || 'Preferences will be available soon'}\n              </p>\n            </div>\n          </div>\n        );\n      case 'notifications':\n        return (\n          <div className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-4 text-foreground-primary\">{t('profile.notifications') || 'Notifications'}</h2>\n            <div className=\"text-center py-8\">\n              <p className=\"text-foreground-secondary\">\n                {t('profile.notificationsComingSoon') || 'Notification settings will be available soon'}\n              </p>\n            </div>\n          </div>\n        );\n      default:\n        return <DoctorDetailsForm key=\"doctor-details-default\" />;\n    }\n  };\n\n  if (!isDoctor) {\n    return (\n      <div className=\"p-6\">\n        <p className=\"text-foreground-secondary\">Access denied. Doctor profile access required.</p>\n      </div>\n    );\n  }\n\n  return (\n    <SidebarMenu\n      title={t('doctor.profile.title') || 'Doctor Profile'}\n      subtitle={t('doctor.profile.subtitle') || 'Manage your professional profile'}\n      menuItems={menuItems}\n      activeSection={activeSection}\n      onSectionChange={setActiveSection}\n    >\n      {renderSection()}\n    </SidebarMenu>\n  );\n};\n\nexport default DoctorProfile;\n","import DoctorProfile from '@/components/doctor/doctor-profile';\nimport { DoctorRoute } from '@/components/common/DoctorRoute';\nimport { useRouter } from 'next/router';\nimport { useEffect } from 'react';\n\nexport default function DoctorProfilePage() {\n  const router = useRouter();\n  const { section } = router.query;\n\n  useEffect(() => {\n    // This will be handled by the DoctorProfile component\n    // The section parameter can be used to set the initial active section\n  }, [section]);\n\n  return (\n    <DoctorRoute>\n      <DoctorProfile initialSection={section as string} />\n    </DoctorRoute>\n  );\n}\n\n"],"names":["DoctorRoute","children","router","useRouter","t","useLanguage","checkingGroup","setCheckingGroup","useState","useEffect","check","session","fetchAuthSession","idPayload","tokens","idToken","payload","groups","includes","replace","ProtectedRoute","div","className","p","user","useAuth","addNotification","useNotifications","httpService","React","HttpService","getInstance","doctor","setDoctor","specialties","setSpecialties","availableSpecialties","setAvailableSpecialties","isSaving","setIsSaving","additionalSpecialtyId","setAdditionalSpecialtyId","additionalSubspecialtyId","setAdditionalSubspecialtyId","register","handleSubmit","formState","errors","isValid","reset","watch","useForm","mode","defaultValues","title","licenseNumber","licenseExpiryDate","bio","consultationFee","lan","firstName","lastName","specialtyId","subspecialtyId","watchedSpecialtyId","loadData","getAllSpecialties","specialtiesData","doctorsResponse","getDoctorSelf","length","primarySpecialty","matchedSpecialtyId","matchedSubspecialtyId","additionalSpecialties","find","spec","isPrimary","specialty","id","subspecialty","filter","currentValues","getAvailableSubspecialties","s","subspecialties","removeNullValues","obj","Array","isArray","undefined","map","item","cleaned","key","value","Object","entries","cleanedValue","keys","onSubmit","data","Number","allSpecialties","selectedSpecialty","selectedSubspecialty","sub","doctorProfileId","createdAt","Date","doctorData","isActive","userId","cleanedDoctorData","updatedDoctor","upsertDoctor","form","DoctorFormFields","onAdditionalSpecialtyChange","onAdditionalSubspecialtyChange","onAddSpecialty","handleAddSpecialty","isDuplicate","some","newSpecialty","prev","onRemoveSpecialty","handleRemoveSpecialty","specialtyIdToRemove","showEmailField","showIsActiveField","Button","type","disabled","DoctorProfile","initialSection","userGroups","isDoctor","useMemo","menuItems","label","activeSection","setActiveSection","allowedSections","SidebarMenu","subtitle","onSectionChange","renderSection","DoctorDetailsForm","h2","DoctorProfilePage","section","query"],"sourceRoot":"","ignoreList":[]}