(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{1546:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/force-change-password",function(){return a(4870)}])},8742:(e,s,a)=>{"use strict";a.d(s,{N6:()=>n,xh:()=>d});var t=a(4848);a(6540);var r=a(98),l=a(8363),o=a(6802);let d=e=>{let{password:s}=e,{t:a}=(0,r.o)(),d=[{label:a("password.minLength")||"At least 8 characters",test:e=>e.length>=8},{label:a("password.uppercase")||"At least one uppercase letter",test:e=>/[A-Z]/.test(e)},{label:a("password.lowercase")||"At least one lowercase letter",test:e=>/[a-z]/.test(e)},{label:a("password.number")||"At least one number",test:e=>/\d/.test(e)},{label:a("password.symbol")||"At least one special character",test:e=>/[@$!%*?&]/.test(e)}],n=e=>e?d.filter(s=>s.test(e)).length/d.length*100:0;return s?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"w-full rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(40>n(s)?"bg-error-600":80>n(s)?"bg-warning-600":"bg-success-600"),style:{width:"".concat(n(s),"%")}})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground-secondary",children:a("password.requirements")||"Password Requirements:"}),d.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(e.test(s)?"bg-primary-600 text-white":"bg-foreground-secondary text-foreground-secondary"),children:e.test(s)?(0,t.jsx)(l.A,{className:"w-3 h-3"}):(0,t.jsx)(o.A,{className:"w-3 h-3"})}),(0,t.jsx)("span",{className:"text-sm ".concat(e.test(s)?"text-primary-600":"text-foreground-secondary"),children:e.label})]},a))]})]}):null},n=()=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/},5065:(e,s,a)=>{"use strict";a.d(s,{l:()=>l});var t=a(4848),r=a(6246);let l=e=>{let{label:s,name:a,register:l,error:o,required:d=!1,tooltip:n,validation:i={},className:c="",type:u="text",placeholder:m}=e;return(0,t.jsxs)("div",{className:"mb-4 ".concat(c),children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("label",{className:"block text-base font-medium text-heading mb-2",children:[s,d&&(0,t.jsx)("span",{className:"text-error-500 ml-1",children:"*"})]}),n&&(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("span",{className:"cursor-help text-foreground-tertiary hover:text-foreground-secondary",children:(0,t.jsx)(r.A,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48",children:n})]})]}),(0,t.jsx)("input",{type:u,placeholder:m,...l(a,i),className:"input-field"}),o&&(0,t.jsx)("p",{className:"mt-2 text-sm text-error-600",children:o})]})}},4870:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(4848),r=a(6540),l=a(6424),o=a(9785),d=a(5065),n=a(5287),i=a(8742),c=a(1023),u=a(98),m=a(6578),h=a(780);let w=()=>{var e,s;let w=(0,l.useRouter)(),{addNotification:p}=(0,c.E)(),{t:x}=(0,u.o)(),{forceChangePassword:f}=(0,m.A)(),[v,g]=(0,r.useState)(!1),{register:b,handleSubmit:N,watch:j,formState:{errors:y}}=(0,o.mN)(),P=j("newPassword"),A=async e=>{g(!0);try{if(await f(e.newPassword)){p("success",x("message.passwordChanged")||"Password changed successfully",3e3);try{var s,t;let e=await (await a.e(560).then(a.bind(a,1560))).fetchAuthSession(),r=null===(t=e.tokens)||void 0===t?void 0:null===(s=t.idToken)||void 0===s?void 0:s.payload,l=(null==r?void 0:r["cognito:groups"])||[];w.push((0,h.pi)(l))}catch(e){w.push("/user/profile")}}}finally{g(!1)}};return(0,t.jsx)("div",{className:"min-h-screen",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-foreground-primary mb-4",children:x("auth.forceChangePasswordTitle")||"Update your password"}),(0,t.jsx)("p",{className:"text-xl text-foreground-secondary",children:x("auth.forceChangePasswordSubtitle")||"You need to set a new password before continuing."})]}),(0,t.jsxs)("div",{className:"max-w-md mx-auto rounded-lg shadow-box p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-foreground-primary mb-6 text-center",children:x("auth.setNewPassword")||"Set a new password"}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:N(A),children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.l,{label:x("auth.newPassword")||"New Password",name:"newPassword",type:"password",register:b,error:null===(e=y.newPassword)||void 0===e?void 0:e.message,required:!0,validation:{required:x("validation.passwordRequired"),minLength:{value:8,message:x("validation.passwordMinLength")},pattern:{value:(0,i.N6)(),message:x("validation.passwordComplexity")}}}),P&&(0,t.jsx)(i.xh,{password:P})]}),(0,t.jsx)(d.l,{label:x("auth.confirmPassword")||"Confirm New Password",name:"confirmNewPassword",type:"password",register:b,error:null===(s=y.confirmNewPassword)||void 0===s?void 0:s.message,required:!0,validation:{required:x("validation.confirmPasswordRequired"),validate:e=>e===P||x("validation.passwordsDoNotMatch")}}),(0,t.jsx)(n.$,{type:"submit",disabled:v,className:"w-full mt-8 bg-primary-600 hover:bg-primary-700 text-white py-3 px-4 rounded-md font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?x("auth.updatingPassword")||"Updating password...":x("auth.updatePassword")||"Update Password"})]})]})]})})};function p(){return(0,t.jsx)(w,{})}},8363:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(6540);let r=t.forwardRef(function(e,s){let{title:a,titleId:r,...l}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})}},e=>{var s=s=>e(e.s=s);e.O(0,[785,636,593,792],()=>s(1546)),_N_E=e.O()}]);
//# sourceMappingURL=force-change-password-a6836835dad4e8fe.js.map