{"version":3,"file":"static/chunks/pages/case/create-570858f897b9d082.js","mappings":"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","sources":["webpack://_N_E/?6d51","webpack://_N_E/./src/components/symptoms/DiagnosisForm.tsx","webpack://_N_E/./src/components/symptoms/SymptomForm.tsx","webpack://_N_E/./src/components/case/CreateCaseWizard.tsx","webpack://_N_E/./src/pages/case/create.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/case/create\",\n      function () {\n        return require(\"private-next-pages/case/create.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/case/create\"])\n      });\n    }\n  ","import React, { useState } from 'react';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport UploadAttachmentWizard from '@/components/case/UploadAttachmentWizard';\nimport { Button } from '@/components/common/Button';\nimport AttachmentList from '@/components/attachment/AttachmentList';\nimport { HttpService } from '@/services/httpService';\nimport { Attachment } from '@/types/attachment';\n\ninterface DiagnosisFormProps {\n  attachments: Pick<Attachment, 'id' | 'originalName' | 'type'>[];\n  onAddDetailed: (payload: { id: number; originalName?: string; typeName: string }) => void;\n  onDelete?: (id: number) => void;\n  onValidityChange?: (isValid: boolean) => void;\n}\n\nexport const DiagnosisForm: React.FC<DiagnosisFormProps> = ({ attachments, onAddDetailed, onDelete, onValidityChange }) => {\n  const { t } = useLanguage();\n  const [open, setOpen] = useState(false);\n  const http = HttpService.getInstance();\n\n  React.useEffect(() => {\n    onValidityChange?.((attachments || []).length > 0);\n  }, [attachments, onValidityChange]);\n\n  return (\n    <div className=\"space-y-4\">\n      <p className=\"text-body\">{t('case.create.diagnosisUploadInfo') || 'Upload your diagnosis files now. They will be linked to your case after creation.'}</p>\n      <UploadAttachmentWizard\n        isOpen={open}\n        onClose={() => setOpen(false)}\n        isDiagnosis={true}\n        onUploaded={(id, displayName, typeName) => {\n          if (typeof id === 'number') {\n            onAddDetailed({ id, originalName: displayName || undefined, typeName: typeName || 'File' });\n          }\n        }}\n      />\n      <AttachmentList\n        items={(attachments || []).map((a, idx) => ({\n          id: a.id || idx,\n          label: a.originalName || `Document ${idx + 1}`,\n          typeName: a.type?.name,\n          metaLeft: undefined,\n          metaRight: undefined,\n          showDelete: true,\n        }))}\n        showOpen={false}\n        openText={t('case.details.open') || 'Open'}\n        deleteText={t('case.details.delete') || 'Delete'}\n        onOpen={async (id) => {\n          const item = (attachments || []).find(a => String(a.id) === String(id));\n          if (!item) return;\n          // Pre-case attachments still can be opened if backed by S3 URL via getAttachmentUrl, but they have no caseId → cannot fetch URL\n          // So for now, skip opening when no caseId\n        }}\n        onDelete={async (id) => {\n          try {\n            // Delete pre-case attachment (no caseId)\n            await http.deleteAttachment({ attachmentId: String(id), caseId: null });\n          } catch {\n            // ignore; backend handles validation\n          }\n          onDelete?.(Number(id));\n        }}\n      />\n      {!open && (\n        <div className=\"flex justify-end\">\n          <Button type=\"button\" variant=\"default\" className=\"bg-primary-600 hover:bg-primary-700 text-white\" onClick={() => setOpen(true)}>\n            {t('case.details.upload') || 'Upload'}\n          </Button>\n        </div>\n      )}\n      {/* Navigation buttons rendered by wizard */}\n    </div>\n  );\n};\n\nexport default DiagnosisForm;\n\n\n","'use client';\n\nimport React, { useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { Case } from '@/types/case';\n// Buttons will be rendered by the wizard; this component exposes submit/reset APIs\n\ninterface SymptomFormProps {\n  onCaseDataSubmit: (caseData: { has_diagnosis: boolean; symptoms: Array<{ description: string; duration: string; severity: string; }>; formData: Case }) => void;\n  savedFormData?: Case | null;\n  registerExternal?: (api: { submit: () => void; reset: () => void }) => void;\n}\n\nexport const SymptomForm: React.FC<SymptomFormProps> = ({ onCaseDataSubmit, savedFormData, registerExternal }) => {\n  const { t } = useLanguage();\n\n  const { register, handleSubmit, formState: { errors }, watch, reset, setValue } = useForm<Case>({\n    defaultValues: savedFormData || {\n      description: '',\n      duration: '',\n      severity: '',\n    }\n  });\n\n  React.useEffect(() => {\n    if (savedFormData) {\n      setValue('description', savedFormData.description || '');\n      setValue('duration', savedFormData.duration || '');\n      setValue('severity', savedFormData.severity || '');\n    }\n  }, [savedFormData, setValue]);\n\n  const onSubmit = useCallback(async (data: Case) => {\n    onCaseDataSubmit({\n      has_diagnosis: false,\n      symptoms: [{\n        description: data.description!,\n        duration: data.duration!,\n        severity: data.severity!,\n      }],\n      formData: data\n    });\n  }, [onCaseDataSubmit]);\n\n  React.useEffect(() => {\n    if (registerExternal) {\n      registerExternal({\n        submit: () => handleSubmit(onSubmit)(),\n        reset: () => reset(),\n      });\n    }\n  }, [registerExternal, handleSubmit, onSubmit, reset]);\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n      {/* Symptoms Description */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.description')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <textarea\n          {...register('description', {\n            required: (t('symptoms.required') as unknown as string),\n            maxLength: {\n              value: 2000,\n              message: t('symptoms.maxLengthExceeded')\n            }\n          })}\n          rows={4}\n          maxLength={2000}\n          className=\"input-field resize-none\"\n          placeholder={t('symptoms.placeholder')}\n        />\n        <div className=\"flex justify-between items-center mt-1\">\n          {errors.description && (\n            <p className=\"text-sm text-error-600\">{errors.description.message}</p>\n          )}\n          <span className=\"text-sm text-body-secondary ml-auto\">\n            {watch('description')?.length || 0}/2000\n          </span>\n        </div>\n      </div>\n\n      {/* Duration */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.duration')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <select\n          {...register('duration', {\n            required: (t('symptoms.durationRequired') as unknown as string)\n          })}\n          className=\"input-field\"\n        >\n          <option value=\"\">{t('symptoms.selectDuration')}</option>\n          <option value=\"less_than_24h\">{t('symptoms.lessThan24h')}</option>\n          <option value=\"1_to_3_days\">{t('symptoms.1to3Days')}</option>\n          <option value=\"3_to_7_days\">{t('symptoms.3to7Days')}</option>\n          <option value=\"1_to_2_weeks\">{t('symptoms.1to2Weeks')}</option>\n          <option value=\"more_than_2_weeks\">{t('symptoms.moreThan2Weeks')}</option>\n        </select>\n        {errors.duration && (\n          <p className=\"mt-2 text-sm text-error-600\">{errors.duration.message}</p>\n        )}\n      </div>\n\n      {/* Severity */}\n      <div>\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {t('symptoms.severity')}\n          <span className=\"text-error-500 ml-1\">*</span>\n        </label>\n        <select\n          {...register('severity', {\n            required: (t('symptoms.severityRequired') as unknown as string)\n          })}\n          className=\"input-field\"\n        >\n          <option value=\"\">{t('symptoms.selectSeverity')}</option>\n          <option value=\"mild\">{t('symptoms.mild')}</option>\n          <option value=\"moderate\">{t('symptoms.moderate')}</option>\n          <option value=\"severe\">{t('symptoms.severe')}</option>\n        </select>\n        {errors.severity && (\n          <p className=\"mt-2 text-sm text-error-600\">{errors.severity.message}</p>\n        )}\n      </div>\n\n      {/* Navigation buttons are handled by the wizard */}\n    </form>\n  );\n};","'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { useForm, UseFormRegister, FieldErrors } from 'react-hook-form';\nimport { useRouter } from 'next/navigation';\nimport { User } from '@/types/user';\nimport { Case } from '@/types/case';\nimport { PersonalBasicInfoForm } from '../user/user-data';\nimport { AddressForm } from '../user/address';\nimport { Demographic } from '../user/demographic';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useNotifications } from '@/contexts/NotificationContext';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { HttpService } from '@/services/httpService';\nimport { useErrorHandler, NotificationCodes } from '@/contexts/ErrorHandlerContext';\nimport { Button } from '../common/Button';\nimport DiagnosisForm from '@/components/symptoms/DiagnosisForm';\nimport { SymptomForm } from '@/components/symptoms/SymptomForm';\nimport Divider from '../common/Divider';\n\n\ninterface PersonalInformationFormData extends User {\n  day: number;\n  month: number;\n  year: number;\n}\n\ninterface CreateCaseWizardProps {\n  user: User;\n}\n\nexport const CreateCaseWizard: React.FC<CreateCaseWizardProps> = ({ user }) => {\n  const router = useRouter();\n  const { t } = useLanguage();\n  const { addNotification } = useNotifications();\n  const { handleCustomError } = useErrorHandler();\n  const { updateUser } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [caseData, setCaseData] = useState<Case | null>(null);\n  const [symptomFormData, setSymptomFormData] = useState<Case | null>(null);\n  const [hasDiagnosis, setHasDiagnosis] = useState<boolean>(false);\n  const [diagnosisAttachments, setDiagnosisAttachments] = useState<{ id: number; originalName?: string; type: { name: string } }[]>([]);\n  const formSubmitRef = React.useRef<(() => void) | null>(null);\n  const formResetRef = React.useRef<(() => void) | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    watch,\n  } = useForm<PersonalInformationFormData>({\n    defaultValues: user ? {\n      ...user,\n      day: user.dateOfBirth ? new Date(user.dateOfBirth).getDate() : undefined,\n      month: user.dateOfBirth ? new Date(user.dateOfBirth).getMonth() + 1 : undefined,\n      year: user.dateOfBirth ? new Date(user.dateOfBirth).getFullYear() : undefined,\n    } : {\n      id: '',\n      firstName: '',\n      lastName: '',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      address: undefined,\n      day: undefined,\n      month: undefined,\n      year: undefined,\n    },\n    mode: 'onChange',\n  });\n\n  // Reset form with user data when user prop changes\n  React.useEffect(() => {\n    if (user) {\n      reset({\n        ...user,\n        day: user.dateOfBirth ? new Date(user.dateOfBirth).getDate() : undefined,\n        month: user.dateOfBirth ? new Date(user.dateOfBirth).getMonth() + 1 : undefined,\n        year: user.dateOfBirth ? new Date(user.dateOfBirth).getFullYear() : undefined,\n      });\n    }\n  }, [user, reset]);\n\n  const handleCaseDataSubmit = useCallback(async (payload: { has_diagnosis: boolean; symptoms: Array<{ description: string; duration: string; severity: string; }>; formData: Case }) => {\n    setCaseData(payload.formData);\n    setSymptomFormData(payload.formData);\n    setHasDiagnosis(payload.has_diagnosis);\n    setCurrentStep(2); // Move to user data step\n  }, []);\n\n  const handleUserDataSubmit = async (data: PersonalInformationFormData) => {\n    setIsSubmitting(true);\n    \n    try {\n      // Process the form data before saving\n      const processedData: User = { ...data };\n      \n      // Convert date of birth from day, month, year to Date object\n      if (data.day && data.month && data.year) {\n        // Use UTC to avoid timezone issues when the date gets serialized\n        processedData.dateOfBirth = new Date(Date.UTC(data.year, data.month - 1, data.day));\n      }\n      \n      // Normalize optional numeric fields: empty string/undefined -> null, strings -> numbers\n      const toNullableNumber = (value: unknown): number | null => {\n        if (value === '' || value === undefined || value === null) return null;\n        if (typeof value === 'number') return Number.isFinite(value) ? value : null;\n        if (typeof value === 'string') {\n          const trimmed = value.trim();\n          if (trimmed === '') return null;\n          const num = Number(trimmed);\n          return Number.isFinite(num) ? num : null;\n        }\n        return null;\n      };\n\n      processedData.height = toNullableNumber(data.height as unknown);\n      processedData.weight = toNullableNumber(data.weight as unknown);\n      \n      // Remove the day, month, year fields as they're not part of the User type\n      delete (processedData as unknown as Record<string, unknown>).day;\n      delete (processedData as unknown as Record<string, unknown>).month;\n      delete (processedData as unknown as Record<string, unknown>).year;\n      \n      // Handle address data: only include if all required fields are provided\n      if (data.address) {\n        const { county, city, postalCode, street, houseNumber } = data.address;\n        \n        // Check if all required address fields are provided\n        if (county && city && postalCode && street && houseNumber) {\n          // Keep the address object as is - backend will handle creation/update\n          processedData.address = {\n            ...data.address,\n            // Convert empty strings to null for optional fields (backend expectation)\n            country: (data.address.country && data.address.country.trim() !== '') ? data.address.country : 'România',\n            block: data.address.block || null,\n            entranceNumber: data.address.entranceNumber || null,\n            floor: data.address.floor || null,\n            apartmentNumber: data.address.apartmentNumber || null,\n          };\n        } else {\n          // If required fields are missing, don't send address\n          delete processedData.address;\n        }\n      }\n      \n      // Update user data first\n      await updateUser(processedData);\n      \n      addNotification('success', t('profile.userDataSaved') || 'User data updated successfully', 3000);\n      \n      // Now create the case\n      const httpService = HttpService.getInstance();\n\n      // Defensive check for non-diagnosis path\n      if (!hasDiagnosis && (!caseData || !caseData.description || !caseData.duration || !caseData.severity)) {\n        handleCustomError(\n          NotificationCodes.VALIDATION_ERROR,\n          t('symptoms.required') || 'Please fill in all required fields'\n        );\n        setIsSubmitting(false);\n        return;\n      }\n\n      // Create the case data in the format expected by the API\n      const caseToCreate: {\n        has_diagnosis: boolean;\n        symptoms: Array<{ description: string; duration: string; severity: string; custom_notes?: string | null }>;\n        custom_notes: string | null;\n        attachments?: Array<{ id: number; originalName?: string | null; type: { name: string }; is_diagnosis: boolean }>;\n      } = hasDiagnosis ? {\n        has_diagnosis: true,\n        symptoms: [],\n        custom_notes: null,\n        attachments: diagnosisAttachments.map(a => ({ id: a.id, originalName: a.originalName || null, type: { name: a.type.name }, is_diagnosis: true })),\n      } : {\n        has_diagnosis: false,\n        symptoms: [{\n          description: caseData!.description!,\n          duration: caseData!.duration!,\n          severity: caseData!.severity!,\n        }],\n        custom_notes: null,\n      };\n\n      await httpService.createCase(caseToCreate);\n\n      addNotification('success', t('symptoms.submitted'), 5000);\n\n      // Redirect to the created case or show success message\n      router.push('/user/profile'); // or wherever you want to redirect\n      \n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleBack = () => {\n    setCurrentStep(currentStep - 1);\n  };\n\n\n  // Check if step 2 is valid (personal info and address)\n  const isStep2Valid = () => {\n    const watchedValues = watch();\n    return !!(\n      watchedValues.firstName &&\n      watchedValues.lastName &&\n      watchedValues.address?.county &&\n      watchedValues.address?.city &&\n      watchedValues.address?.postalCode &&\n      watchedValues.address?.street &&\n      watchedValues.address?.houseNumber\n    );\n  };\n\n  // Check if step 3 is valid (demographic info)\n  const isStep3Valid = () => {\n    const watched = watch() as unknown as { gender?: string; day?: number | string; month?: number | string; year?: number | string };\n    const hasGender = !!watched.gender;\n    const hasDay = !!watched.day;\n    const hasMonth = !!watched.month;\n    const hasYear = !!watched.year;\n    const hasFieldErrors = Boolean((errors as unknown as Record<string, unknown>).gender || errors.day || errors.month || errors.year);\n    return hasGender && hasDay && hasMonth && hasYear && !hasFieldErrors;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background-secondary py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"card-elevated\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-heading mb-2\">\n              {t('wizard.createCase')}\n            </h1>\n            <p className=\"text-body\">\n              {t('wizard.createCaseDescription')}\n            </p>\n          </div>\n\n          {/* Progress Steps */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center justify-center\">\n              <div className={`flex items-center ${currentStep >= 1 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 1 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  1\n                </div>\n                <span className=\"ml-2 font-medium\">{t('symptoms.title') || 'Symptoms'}</span>\n              </div>\n              <div className={`w-16 h-0.5 mx-4 ${currentStep >= 2 ? 'bg-primary-600' : 'bg-gray-300'}`}></div>\n              <div className={`flex items-center ${currentStep >= 2 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 2 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  2\n                </div>\n                <span className=\"ml-2 font-medium\">{t('wizard.personalInfo')}</span>\n              </div>\n              <div className={`w-16 h-0.5 mx-4 ${currentStep >= 3 ? 'bg-primary-600' : 'bg-gray-300'}`}></div>\n              <div className={`flex items-center ${currentStep >= 3 ? 'text-primary-600' : 'text-gray-400'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${\n                  currentStep >= 3 ? 'bg-primary-600 border-primary-600 text-white' : 'border-gray-300'\n                }`}>\n                  3\n                </div>\n                <span className=\"ml-2 font-medium\">{t('wizard.demographic')}</span>\n              </div>\n            </div>\n          </div>\n\n          <Divider marginClass=\"my-1\" />\n\n          {/* Step 1: Symptoms or Diagnosis Upload */}\n          {currentStep === 1 && (\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {hasDiagnosis ? (t('case.details.documents') || 'Documents') : t('symptoms.title')}\n              </h3>\n              {/* Has Diagnosis Toggle */}\n              <div className=\"flex items-center p-3 bg-neutral-50 rounded-md border border-border-primary\">\n                <label htmlFor=\"hasDiagnosis\" className=\"flex items-center gap-3 cursor-pointer\">\n                  <input\n                    id=\"hasDiagnosis\"\n                    type=\"checkbox\"\n                    className=\"sr-only\"\n                    checked={hasDiagnosis}\n                    onChange={(e) => setHasDiagnosis(e.target.checked)}\n                  />\n                  <div className={`relative inline-flex h-6 w-11 rounded-full transition-colors ${hasDiagnosis ? 'bg-primary-600' : 'bg-neutral-300'}`}>\n                    <span className={`absolute top-0.5 left-0.5 inline-block h-5 w-5 rounded-full bg-white shadow transform transition-transform ${hasDiagnosis ? 'translate-x-5' : 'translate-x-0'}`}></span>\n                  </div>\n                  <span className=\"text-sm text-foreground-primary\">{t('case.create.hasDiagnosis') || 'I already have a diagnosis'}</span>\n                </label>\n              </div>\n              {hasDiagnosis ? (\n                <DiagnosisForm\n                  attachments={diagnosisAttachments.map(a => ({ id: a.id, originalName: a.originalName, type: { name: a.type.name } }))}\n                  onAddDetailed={({ id, originalName, typeName }) => {\n                    setDiagnosisAttachments(prev => {\n                      // If we already have an entry for this upload session, keep the originalName if present\n                      const existsIdx = prev.findIndex(x => x.originalName === originalName || x.id === id);\n                      if (existsIdx >= 0) {\n                        const next = [...prev];\n                        next[existsIdx] = { id, originalName: next[existsIdx].originalName || originalName, type: { name: typeName } };\n                        return next;\n                      }\n                      return [...prev, { id, originalName, type: { name: typeName } }];\n                    });\n                  }}\n                  onDelete={(id) => setDiagnosisAttachments(prev => prev.filter(x => x.id !== id))}\n                />\n              ) : (\n                <SymptomForm\n                  onCaseDataSubmit={handleCaseDataSubmit}\n                  savedFormData={symptomFormData}\n                  registerExternal={({ submit, reset }) => {\n                    // Render buttons below and hook into form handlers\n                    formSubmitRef.current = submit;\n                    formResetRef.current = reset;\n                  }}\n                />\n              )}\n\n              <Divider marginClass=\"my-1\" />\n              \n              <div className=\"flex justify-end gap-4 pt-4\">\n                {!hasDiagnosis && (\n                  <Button\n                    type=\"button\"\n                    variant=\"secondary\"\n                    onClick={() => formResetRef.current?.()}\n                    className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                  >\n                    {t('symptoms.reset')}\n                  </Button>\n                )}\n                \n                <Button\n                  type=\"button\"\n                  variant=\"default\"\n                  onClick={() => {\n                    if (hasDiagnosis) {\n                      if (diagnosisAttachments.length > 0) {\n                        setCurrentStep(2);\n                      }\n                    } else {\n                      formSubmitRef.current?.();\n                    }\n                  }}\n                  disabled={hasDiagnosis && diagnosisAttachments.length === 0}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {t('common.next')}\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Step 2: Personal Information and Address */}\n          {currentStep === 2 && (\n            <form onSubmit={handleSubmit(handleUserDataSubmit)} className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {t('profile.personalInformation')}\n              </h3>\n              \n              {/* Personal Details */}\n              <div className=\"space-y-4\">\n                <PersonalBasicInfoForm register={register as unknown as UseFormRegister<User>} errors={errors as unknown as FieldErrors<User>} />\n              </div>\n\n              {/* Address */}\n              <div className=\"space-y-4\">\n                <AddressForm register={register as unknown as UseFormRegister<User>} errors={errors as unknown as FieldErrors<User>} />\n              </div>\n\n              {/* Navigation Buttons */}\n              <div className=\"flex justify-between gap-3 pt-6 border-t border-gray-200\">\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  onClick={handleBack}\n                  className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                >\n                  {t('common.back')}\n                </Button>\n                \n                <Button\n                  type=\"button\"\n                  variant=\"default\"\n                  onClick={() => setCurrentStep(3)}\n                  disabled={!isStep2Valid()}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {t('common.next')}\n                </Button>\n              </div>\n            </form>\n          )}\n\n          {/* Step 3: Demographic Information */}\n          {currentStep === 3 && (\n            <form onSubmit={handleSubmit(handleUserDataSubmit)} className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                {t('wizard.demographic')}\n              </h3>\n              \n              <Demographic register={register} errors={errors} />\n\n              {/* Navigation Buttons */}\n              <div className=\"flex justify-between gap-3 pt-6 border-t border-gray-200\">\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  onClick={handleBack}\n                  className=\"bg-neutral-100 text-neutral-700 border-neutral-300 hover:bg-neutral-200 hover:text-neutral-800\"\n                >\n                  {t('common.back')}\n                </Button>\n                \n                <Button\n                  type=\"submit\"\n                  variant=\"default\"\n                  disabled={isSubmitting || !isStep3Valid()}\n                  className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {isSubmitting ? t('common.loading') : t('wizard.saveAndSubmit')}\n                </Button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { CreateCaseWizard } from '@/components/case/CreateCaseWizard';\n\nexport default function CreateCasePage() {\n  const router = useRouter();\n  const { isAuthenticated, loading, user, userLoading, userGroups } = useAuth();\n  const { t } = useLanguage();\n  const isPatient = userGroups.includes('patient');\n\n  // Redirect non-patient users directly to profile\n  React.useEffect(() => {\n    if (isAuthenticated && !loading && !userLoading && user && !isPatient) {\n      router.replace('/user/profile');\n    }\n  }, [isAuthenticated, loading, userLoading, user, isPatient, router]);\n\n  // If not authenticated, redirect to login\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background-secondary\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-heading mb-4\">\n            {t('auth.loginRequired') || 'Login Required'}\n          </h1>\n          <p className=\"text-body mb-6\">\n            {t('auth.loginToCreateCase') || 'Please log in to create a medical case.'}\n          </p>\n          <button\n            onClick={() => router.push('/auth/login')}\n            className=\"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors\"\n          >\n            {t('auth.login') || 'Login'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return;\n  }\n\n  // Show the CreateCaseWizard\n  return <CreateCaseWizard user={user} />;\n}"],"names":["attachments","DiagnosisForm","onAddDetailed","onDelete","onValidityChange","t","useLanguage","open","setOpen","useState","http","HttpService","getInstance","React","length","div","className","p","UploadAttachmentWizard","isOpen","onClose","isDiagnosis","onUploaded","id","displayName","typeName","originalName","undefined","AttachmentList","items","map","a","idx","label","type","name","metaLeft","metaRight","showDelete","showOpen","openText","deleteText","onOpen","item","find","String","deleteAttachment","attachmentId","caseId","Number","Button","variant","onClick","watch","onCaseDataSubmit","savedFormData","registerExternal","register","handleSubmit","formState","errors","reset","setValue","useForm","defaultValues","description","duration","severity","onSubmit","useCallback","data","has_diagnosis","symptoms","formData","submit","form","span","textarea","required","maxLength","value","message","rows","placeholder","select","option","CreateCaseWizard","user","router","useRouter","addNotification","useNotifications","handleCustomError","useErrorHandler","updateUser","useAuth","isSubmitting","setIsSubmitting","currentStep","setCurrentStep","caseData","setCaseData","symptomFormData","setSymptomFormData","hasDiagnosis","setHasDiagnosis","diagnosisAttachments","setDiagnosisAttachments","formSubmitRef","formResetRef","day","dateOfBirth","Date","getDate","month","getMonth","year","getFullYear","firstName","lastName","createdAt","updatedAt","address","mode","handleCaseDataSubmit","payload","handleUserDataSubmit","processedData","UTC","toNullableNumber","isFinite","trimmed","trim","num","height","weight","county","city","postalCode","street","houseNumber","country","block","entranceNumber","floor","apartmentNumber","httpService","NotificationCodes","VALIDATION_ERROR","caseToCreate","custom_notes","is_diagnosis","createCase","push","handleBack","h1","Divider","marginClass","h3","htmlFor","input","checked","onChange","e","target","prev","existsIdx","findIndex","x","next","filter","SymptomForm","current","disabled","PersonalBasicInfoForm","AddressForm","isStep2Valid","watchedValues","Demographic","isStep3Valid","watched","hasGender","gender","hasDay","hasMonth","hasYear","hasFieldErrors","Boolean","CreateCasePage","isAuthenticated","loading","userLoading","userGroups","isPatient","includes","button"],"sourceRoot":"","ignoreList":[]}